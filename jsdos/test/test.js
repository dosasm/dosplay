/*! For license information please see test.js.LICENSE.txt */
!function e(t,n,o){function s(i,a){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,(function(e){return s(t[i][1][e]||e)}),l,l.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)s(o[i]);return s}({1:[function(e,t,n){function o(){var e=[].slice.call(arguments);function t(t,n){Object.keys(n).forEach((function(o){~e.indexOf(o)||(t[o]=n[o])}))}return function(){for(var e=[].slice.call(arguments),n=0,o={};n<e.length;n++)t(o,e[n]);return o}}function s(e,t,n){var r=o("name","message","stack","constructor","toJSON")(t||{});for(var i in this.message=e||"Unspecified AssertionError",this.showDiff=!1,r)this[i]=r[i];if(n=n||s,Error.captureStackTrace)Error.captureStackTrace(this,n);else try{throw new Error}catch(e){this.stack=e.stack}}t.exports=s,s.prototype=Object.create(Error.prototype),s.prototype.name="AssertionError",s.prototype.constructor=s,s.prototype.toJSON=function(e){var t=o("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},{}],2:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o},n.toByteArray=function(e){var t,n,o=c(e),i=o[0],a=o[1],u=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),l=0,d=a>0?i-4:i;for(n=0;n<d;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},n.fromByteArray=function(e){for(var t,n=e.length,s=n%3,r=[],i=16383,a=0,c=n-s;a<c;a+=i)r.push(u(e,a,a+i>c?c:a+i));return 1===s?(t=e[n-1],r.push(o[t>>2]+o[t<<4&63]+"==")):2===s&&(t=(e[n-2]<<8)+e[n-1],r.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),r.join("")};for(var o=[],s=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)o[a]=i[a],s[i.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var s,r,i=[],a=t;a<n;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(o[(r=s)>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return i.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],3:[function(e,t,n){},{}],4:[function(e,t,n){(function(t){(function(){"use strict";var t=e("base64-js"),o=e("ieee754");n.Buffer=i,n.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},n.INSPECT_MAX_BYTES=50;var s=2147483647;function r(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),o=r(n),s=o.write(e,t);return s!==n&&(o=o.slice(0,s)),o}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=i.prototype,o}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return i.from(o,t,n);var s=function(e){if(i.isBuffer(e)){var t=0|d(e.length),n=r(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?r(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),r(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),n=r(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function h(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(s)return o?-1:z(e).length;t=(""+t).toLowerCase(),s=!0}}function f(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function p(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function m(e,t,n,o,s){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof t&&(t=i.from(t,o)),i.isBuffer(t))return 0===t.length?-1:y(e,t,n,o,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,o,s);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,o,s){var r,i=1,a=e.length,c=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;i=2,a/=2,c/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(s){var l=-1;for(r=n;r<a;r++)if(u(e,r)===u(t,-1===l?0:r-l)){if(-1===l&&(l=r),r-l+1===c)return l*i}else-1!==l&&(r-=r-l),l=-1}else for(n+c>a&&(n=a-c),r=n;r>=0;r--){for(var d=!0,h=0;h<c;h++)if(u(e,r+h)!==u(t,h)){d=!1;break}if(d)return r}return-1}function w(e,t,n,o){n=Number(n)||0;var s=e.length-n;o?(o=Number(o))>s&&(o=s):o=s;var r=t.length;o>r/2&&(o=r/2);for(var i=0;i<o;++i){var a=parseInt(t.substr(2*i,2),16);if(q(a))return i;e[n+i]=a}return i}function b(e,t,n,o){return I(z(t,e.length-n),e,n,o)}function g(e,t,n,o){return I(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function v(e,t,n,o){return g(e,t,n,o)}function x(e,t,n,o){return I(F(t),e,n,o)}function k(e,t,n,o){return I(function(e,t){for(var n,o,s,r=[],i=0;i<e.length&&!((t-=2)<0);++i)o=(n=e.charCodeAt(i))>>8,s=n%256,r.push(s),r.push(o);return r}(t,e.length-n),e,n,o)}function P(e,n,o){return 0===n&&o===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,o))}function M(e,t,n){n=Math.min(e.length,n);for(var o=[],s=t;s<n;){var r,i,a,c,u=e[s],l=null,d=u>239?4:u>223?3:u>191?2:1;if(s+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(r=e[s+1]))&&(c=(31&u)<<6|63&r)>127&&(l=c);break;case 3:r=e[s+1],i=e[s+2],128==(192&r)&&128==(192&i)&&(c=(15&u)<<12|(63&r)<<6|63&i)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:r=e[s+1],i=e[s+2],a=e[s+3],128==(192&r)&&128==(192&i)&&128==(192&a)&&(c=(15&u)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|1023&l),o.push(l),s+=d}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=_));return n}(o)}n.kMaxLength=s,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,n){return a(e,t,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}(e,t,n)},i.allocUnsafe=function(e){return u(e)},i.allocUnsafeSlow=function(e){return u(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(L(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,o=t.length,s=0,r=Math.min(n,o);s<r;++s)if(e[s]!==t[s]){n=e[s],o=t[s];break}return n<o?-1:o<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=i.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var r=e[n];if(L(r,Uint8Array)&&(r=i.from(r)),!i.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(o,s),s+=r.length}return o},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):f.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,o,s){if(L(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),t<0||n>e.length||o<0||s>this.length)throw new RangeError("out of range index");if(o>=s&&t>=n)return 0;if(o>=s)return-1;if(t>=n)return 1;if(this===e)return 0;for(var r=(s>>>=0)-(o>>>=0),a=(n>>>=0)-(t>>>=0),c=Math.min(r,a),u=this.slice(o,s),l=e.slice(t,n),d=0;d<c;++d)if(u[d]!==l[d]){r=u[d],a=l[d];break}return r<a?-1:a<r?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},i.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function S(e,t,n){var o="";n=Math.min(e.length,n);for(var s=t;s<n;++s)o+=String.fromCharCode(127&e[s]);return o}function O(e,t,n){var o="";n=Math.min(e.length,n);for(var s=t;s<n;++s)o+=String.fromCharCode(e[s]);return o}function j(e,t,n){var o,s=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);for(var r="",i=t;i<n;++i)r+=(o=e[i])<16?"0"+o.toString(16):o.toString(16);return r}function E(e,t,n){for(var o=e.slice(t,n),s="",r=0;r<o.length;r+=2)s+=String.fromCharCode(o[r]+256*o[r+1]);return s}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,o,s,r){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<r)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function T(e,t,n,o,s,r){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,s,r){return t=+t,n>>>=0,r||T(e,0,n,4),o.write(e,t,n,s,23,4),n+4}function B(e,t,n,s,r){return t=+t,n>>>=0,r||T(e,0,n,8),o.write(e,t,n,s,52,8),n+8}i.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var o=this.subarray(e,t);return o.__proto__=i.prototype,o},i.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var o=this[e],s=1,r=0;++r<t&&(s*=256);)o+=this[e+r]*s;return o},i.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var o=this[e+--t],s=1;t>0&&(s*=256);)o+=this[e+--t]*s;return o},i.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var o=this[e],s=1,r=0;++r<t&&(s*=256);)o+=this[e+r]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*t)),o},i.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var o=t,s=1,r=this[e+--o];o>0&&(s*=256);)r+=this[e+--o]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||C(this,e,t,n,Math.pow(2,8*n)-1,0);var s=1,r=0;for(this[t]=255&e;++r<n&&(s*=256);)this[t+r]=e/s&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||C(this,e,t,n,Math.pow(2,8*n)-1,0);var s=n-1,r=1;for(this[t+s]=255&e;--s>=0&&(r*=256);)this[t+s]=e/r&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var s=Math.pow(2,8*n-1);C(this,e,t,n,s-1,-s)}var r=0,i=1,a=0;for(this[t]=255&e;++r<n&&(i*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/i|0)-a&255;return t+n},i.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var s=Math.pow(2,8*n-1);C(this,e,t,n,s-1,-s)}var r=n-1,i=1,a=0;for(this[t+r]=255&e;--r>=0&&(i*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/i|0)-a&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,o){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var s=o-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,o);else if(this===e&&n<t&&t<o)for(var r=s-1;r>=0;--r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,o),t);return s},i.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!i.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var s=e.charCodeAt(0);("utf8"===o&&s<128||"latin1"===o)&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var a=i.isBuffer(e)?e:i.from(e,o),c=a.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=a[r%c]}return this};var N=/[^+/0-9A-Za-z-_]/g;function z(e,t){var n;t=t||1/0;for(var o=e.length,s=null,r=[],i=0;i<o;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(i+1===o){(t-=3)>-1&&r.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&r.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function F(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,n,o){for(var s=0;s<o&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:4,ieee754:40}],5:[function(e,t,n){t.exports=e("./lib/chai")},{"./lib/chai":6}],6:[function(e,t,n){var o=[];n.version="4.3.3",n.AssertionError=e("assertion-error");var s=e("./chai/utils");n.use=function(e){return~o.indexOf(e)||(e(n,s),o.push(e)),n},n.util=s;var r=e("./chai/config");n.config=r;var i=e("./chai/assertion");n.use(i);var a=e("./chai/core/assertions");n.use(a);var c=e("./chai/interface/expect");n.use(c);var u=e("./chai/interface/should");n.use(u);var l=e("./chai/interface/assert");n.use(l)},{"./chai/assertion":7,"./chai/config":8,"./chai/core/assertions":9,"./chai/interface/assert":10,"./chai/interface/expect":11,"./chai/interface/should":12,"./chai/utils":26,"assertion-error":1}],7:[function(e,t,n){var o=e("./config");t.exports=function(e,t){var n=e.AssertionError,s=t.flag;function r(e,n,o,i){return s(this,"ssfi",o||r),s(this,"lockSsfi",i),s(this,"object",e),s(this,"message",n),t.proxify(this)}e.Assertion=r,Object.defineProperty(r,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),o.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),o.includeStack=e}}),Object.defineProperty(r,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),o.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),o.showDiff=e}}),r.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},r.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},r.addChainableMethod=function(e,n,o){t.addChainableMethod(this.prototype,e,n,o)},r.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},r.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},r.overwriteChainableMethod=function(e,n,o){t.overwriteChainableMethod(this.prototype,e,n,o)},r.prototype.assert=function(e,r,i,a,c,u){var l=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==o.showDiff&&(u=!1),!l){r=t.getMessage(this,arguments);var d={actual:t.getActual(this,arguments),expected:a,showDiff:u},h=t.getOperator(this,arguments);throw h&&(d.operator=h),new n(r,d,o.includeStack?this.assert:s(this,"ssfi"))}},Object.defineProperty(r.prototype,"_obj",{get:function(){return s(this,"object")},set:function(e){s(this,"object",e)}})}},{"./config":8}],8:[function(e,t,n){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},{}],9:[function(e,t,n){t.exports=function(e,t){var n=e.Assertion,o=e.AssertionError,s=t.flag;function r(e,n){n&&s(this,"message",n),e=e.toLowerCase();var o=s(this,"object"),r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(o).toLowerCase(),"expected #{this} to be "+r+e,"expected #{this} not to be "+r+e)}function i(e,n){return t.isNaN(e)&&t.isNaN(n)||e===n}function a(){s(this,"contains",!0)}function c(e,r){r&&s(this,"message",r);var a=s(this,"object"),c=t.type(a).toLowerCase(),u=s(this,"message"),l=s(this,"negate"),d=s(this,"ssfi"),h=s(this,"deep"),f=h?"deep ":"";u=u?u+": ":"";var p=!1;switch(c){case"string":p=-1!==a.indexOf(e);break;case"weakset":if(h)throw new o(u+"unable to use .deep.include with WeakSet",void 0,d);p=a.has(e);break;case"map":var m=h?t.eql:i;a.forEach((function(t){p=p||m(t,e)}));break;case"set":h?a.forEach((function(n){p=p||t.eql(n,e)})):p=a.has(e);break;case"array":p=h?a.some((function(n){return t.eql(n,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new o(u+"the given combination of arguments ("+c+" and "+t.type(e).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+t.type(e).toLowerCase(),void 0,d);var y=Object.keys(e),w=null,b=0;if(y.forEach((function(r){var i=new n(a);if(t.transferFlags(this,i,!0),s(i,"lockSsfi",!0),l&&1!==y.length)try{i.property(r,e[r])}catch(e){if(!t.checkError.compatibleConstructor(e,o))throw e;null===w&&(w=e),b++}else i.property(r,e[r])}),this),l&&y.length>1&&b===y.length)throw w;return}this.assert(p,"expected #{this} to "+f+"include "+t.inspect(e),"expected #{this} to not "+f+"include "+t.inspect(e))}function u(){var e=s(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")}function l(){var e=s(this,"object"),n=t.type(e);this.assert("Arguments"===n,"expected #{this} to be arguments but got "+n,"expected #{this} to not be arguments")}function d(e,t){t&&s(this,"message",t);var n=s(this,"object");if(s(this,"deep")){var o=s(this,"lockSsfi");s(this,"lockSsfi",!0),this.eql(e),s(this,"lockSsfi",o)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function h(e,n){n&&s(this,"message",n),this.assert(t.eql(e,s(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function f(e,r){r&&s(this,"message",r);var i,a=s(this,"object"),c=s(this,"doLength"),u=s(this,"message"),l=u?u+": ":"",d=s(this,"ssfi"),h=t.type(a).toLowerCase(),f=t.type(e).toLowerCase(),p=!0;if(c&&"map"!==h&&"set"!==h&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==h||"date"===f?"number"===f||!c&&"number"!==h?c||"date"===h||"number"===h?p=!1:i=l+"expected "+("string"===h?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to above must be a number":i=l+"the argument to above must be a date",p)throw new o(i,void 0,d);if(c){var m,y="length";"map"===h||"set"===h?(y="size",m=a.size):m=a.length,this.assert(m>e,"expected #{this} to have a "+y+" above #{exp} but got #{act}","expected #{this} to not have a "+y+" above #{exp}",e,m)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function p(e,r){r&&s(this,"message",r);var i,a=s(this,"object"),c=s(this,"doLength"),u=s(this,"message"),l=u?u+": ":"",d=s(this,"ssfi"),h=t.type(a).toLowerCase(),f=t.type(e).toLowerCase(),p=!0;if(c&&"map"!==h&&"set"!==h&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==h||"date"===f?"number"===f||!c&&"number"!==h?c||"date"===h||"number"===h?p=!1:i=l+"expected "+("string"===h?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to least must be a number":i=l+"the argument to least must be a date",p)throw new o(i,void 0,d);if(c){var m,y="length";"map"===h||"set"===h?(y="size",m=a.size):m=a.length,this.assert(m>=e,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",e,m)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function m(e,r){r&&s(this,"message",r);var i,a=s(this,"object"),c=s(this,"doLength"),u=s(this,"message"),l=u?u+": ":"",d=s(this,"ssfi"),h=t.type(a).toLowerCase(),f=t.type(e).toLowerCase(),p=!0;if(c&&"map"!==h&&"set"!==h&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==h||"date"===f?"number"===f||!c&&"number"!==h?c||"date"===h||"number"===h?p=!1:i=l+"expected "+("string"===h?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to below must be a number":i=l+"the argument to below must be a date",p)throw new o(i,void 0,d);if(c){var m,y="length";"map"===h||"set"===h?(y="size",m=a.size):m=a.length,this.assert(m<e,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",e,m)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,r){r&&s(this,"message",r);var i,a=s(this,"object"),c=s(this,"doLength"),u=s(this,"message"),l=u?u+": ":"",d=s(this,"ssfi"),h=t.type(a).toLowerCase(),f=t.type(e).toLowerCase(),p=!0;if(c&&"map"!==h&&"set"!==h&&new n(a,u,d,!0).to.have.property("length"),c||"date"!==h||"date"===f?"number"===f||!c&&"number"!==h?c||"date"===h||"number"===h?p=!1:i=l+"expected "+("string"===h?"'"+a+"'":a)+" to be a number or a date":i=l+"the argument to most must be a number":i=l+"the argument to most must be a date",p)throw new o(i,void 0,d);if(c){var m,y="length";"map"===h||"set"===h?(y="size",m=a.size):m=a.length,this.assert(m<=e,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",e,m)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function w(e,n){n&&s(this,"message",n);var r=s(this,"object"),i=s(this,"ssfi"),a=s(this,"message");try{var c=r instanceof e}catch(n){if(n instanceof TypeError)throw new o((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,i);throw n}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function b(e,n,r){r&&s(this,"message",r);var i=s(this,"nested"),a=s(this,"own"),c=s(this,"message"),u=s(this,"object"),l=s(this,"ssfi"),d=typeof e;if(c=c?c+": ":"",i){if("string"!==d)throw new o(c+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new o(c+"the argument to property must be a string, number, or symbol",void 0,l);if(i&&a)throw new o(c+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==u)throw new o(c+"Target cannot be null or undefined.",void 0,l);var h,f=s(this,"deep"),p=s(this,"negate"),m=i?t.getPathInfo(u,e):null,y=i?m.value:u[e],w="";f&&(w+="deep "),a&&(w+="own "),i&&(w+="nested "),w+="property ",h=a?Object.prototype.hasOwnProperty.call(u,e):i?m.exists:t.hasProperty(u,e),p&&1!==arguments.length||this.assert(h,"expected #{this} to have "+w+t.inspect(e),"expected #{this} to not have "+w+t.inspect(e)),arguments.length>1&&this.assert(h&&(f?t.eql(n,y):n===y),"expected #{this} to have "+w+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+t.inspect(e)+" of #{act}",n,y),s(this,"object",y)}function g(e,t,n){s(this,"own",!0),b.apply(this,arguments)}function v(e,n,o){"string"==typeof n&&(o=n,n=null),o&&s(this,"message",o);var r=s(this,"object"),i=Object.getOwnPropertyDescriptor(Object(r),e);i&&n?this.assert(t.eql(n,i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(i),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),s(this,"object",i)}function x(){s(this,"doLength",!0)}function k(e,o){o&&s(this,"message",o);var r,i=s(this,"object"),a=t.type(i).toLowerCase(),c=s(this,"message"),u=s(this,"ssfi"),l="length";switch(a){case"map":case"set":l="size",r=i.size;break;default:new n(i,c,u,!0).to.have.property("length"),r=i.length}this.assert(r==e,"expected #{this} to have a "+l+" of #{exp} but got #{act}","expected #{this} to not have a "+l+" of #{act}",e,r)}function P(e,t){t&&s(this,"message",t);var n=s(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function M(e){var n,r,i=s(this,"object"),a=t.type(i),c=t.type(e),u=s(this,"ssfi"),l=s(this,"deep"),d="",h=!0,f=s(this,"message"),p=(f=f?f+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)d=l?"deeply ":"",r=[],i.forEach((function(e,t){r.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(r=t.getOwnEnumerableProperties(i),c){case"Array":if(arguments.length>1)throw new o(p,void 0,u);break;case"Object":if(arguments.length>1)throw new o(p,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new o(f+"keys required",void 0,u);var m=e.length,y=s(this,"any"),w=s(this,"all"),b=e;if(y||w||(w=!0),y&&(h=b.some((function(e){return r.some((function(n){return l?t.eql(e,n):e===n}))}))),w&&(h=b.every((function(e){return r.some((function(n){return l?t.eql(e,n):e===n}))})),s(this,"contains")||(h=h&&e.length==r.length)),m>1){var g=(e=e.map((function(e){return t.inspect(e)}))).pop();w&&(n=e.join(", ")+", and "+g),y&&(n=e.join(", ")+", or "+g)}else n=t.inspect(e[0]);n=(m>1?"keys ":"key ")+n,n=(s(this,"contains")?"contain ":"have ")+n,this.assert(h,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,b.slice(0).sort(t.compareByInspect),r.sort(t.compareByInspect),!0)}function _(e,o,r){r&&s(this,"message",r);var i,a=s(this,"object"),c=s(this,"ssfi"),u=s(this,"message"),l=s(this,"negate")||!1;new n(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(o=e,e=null);try{a()}catch(e){i=e}var d=void 0===e&&void 0===o,h=Boolean(e&&o),f=!1,p=!1;if(d||!d&&!l){var m="an error";e instanceof Error?m="#{exp}":e&&(m=t.checkError.getConstructorName(e)),this.assert(i,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),i instanceof Error?i.toString():"string"==typeof i?i:i&&t.checkError.getConstructorName(i))}if(e&&i&&(e instanceof Error&&t.checkError.compatibleInstance(i,e)===l&&(h&&l?f=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i&&!l?" but #{act} was thrown":""),e.toString(),i.toString())),t.checkError.compatibleConstructor(i,e)===l&&(h&&l?f=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)))),i&&null!=o){var y="including";o instanceof RegExp&&(y="matching"),t.checkError.compatibleMessage(i,o)===l&&(h&&l?p=!0:this.assert(l,"expected #{this} to throw error "+y+" #{exp} but got #{act}","expected #{this} to throw error not "+y+" #{exp}",o,t.checkError.getMessage(i)))}f&&p&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(i?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),i instanceof Error?i.toString():i&&t.checkError.getConstructorName(i)),s(this,"object",i)}function S(e,n){n&&s(this,"message",n);var o=s(this,"object"),r=s(this,"itself"),i="function"!=typeof o||r?o[e]:o.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function O(e,n){n&&s(this,"message",n);var o=e(s(this,"object"));this.assert(o,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!s(this,"negate"),o)}function j(e,t,r){r&&s(this,"message",r);var i=s(this,"object"),a=s(this,"message"),c=s(this,"ssfi");if(new n(i,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new o((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers"+(void 0===t?", and a delta is required":""),void 0,c);this.assert(Math.abs(i-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function E(e,t,o){o&&s(this,"message",o);var r,i=s(this,"object"),a=s(this,"message"),c=s(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),r=e[t]):(new n(e,a,c,!0).is.a("function"),r=e()),i();var u=null==t?e():e[t],l=null==t?r:"."+t;s(this,"deltaMsgObj",l),s(this,"initialDeltaValue",r),s(this,"finalDeltaValue",u),s(this,"deltaBehavior","change"),s(this,"realDelta",u!==r),this.assert(r!==u,"expected "+l+" to change","expected "+l+" to not change")}function D(e,t,o){o&&s(this,"message",o);var r,i=s(this,"object"),a=s(this,"message"),c=s(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),r=e[t]):(new n(e,a,c,!0).is.a("function"),r=e()),new n(r,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?r:"."+t;s(this,"deltaMsgObj",l),s(this,"initialDeltaValue",r),s(this,"finalDeltaValue",u),s(this,"deltaBehavior","increase"),s(this,"realDelta",u-r),this.assert(u-r>0,"expected "+l+" to increase","expected "+l+" to not increase")}function C(e,t,o){o&&s(this,"message",o);var r,i=s(this,"object"),a=s(this,"message"),c=s(this,"ssfi");new n(i,a,c,!0).is.a("function"),t?(new n(e,a,c,!0).to.have.property(t),r=e[t]):(new n(e,a,c,!0).is.a("function"),r=e()),new n(r,a,c,!0).is.a("number"),i();var u=null==t?e():e[t],l=null==t?r:"."+t;s(this,"deltaMsgObj",l),s(this,"initialDeltaValue",r),s(this,"finalDeltaValue",u),s(this,"deltaBehavior","decrease"),s(this,"realDelta",r-u),this.assert(u-r<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){s(this,"negate",!0)})),n.addProperty("deep",(function(){s(this,"deep",!0)})),n.addProperty("nested",(function(){s(this,"nested",!0)})),n.addProperty("own",(function(){s(this,"own",!0)})),n.addProperty("ordered",(function(){s(this,"ordered",!0)})),n.addProperty("any",(function(){s(this,"any",!0),s(this,"all",!1)})),n.addProperty("all",(function(){s(this,"all",!0),s(this,"any",!1)})),n.addChainableMethod("an",r),n.addChainableMethod("a",r),n.addChainableMethod("include",c,a),n.addChainableMethod("contain",c,a),n.addChainableMethod("contains",c,a),n.addChainableMethod("includes",c,a),n.addProperty("ok",(function(){this.assert(s(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===s(this,"object"),"expected #{this} to be true","expected #{this} to be false",!s(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===s(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!s(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===s(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===s(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(t.isNaN(s(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",u),n.addProperty("exists",u),n.addProperty("empty",(function(){var e,n=s(this,"object"),r=s(this,"ssfi"),i=s(this,"message");switch(i=i?i+": ":"",t.type(n).toLowerCase()){case"array":case"string":e=n.length;break;case"map":case"set":e=n.size;break;case"weakmap":case"weakset":throw new o(i+".empty was passed a weak collection",void 0,r);case"function":var a=i+".empty was passed a function "+t.getName(n);throw new o(a.trim(),void 0,r);default:if(n!==Object(n))throw new o(i+".empty was passed non-string primitive "+t.inspect(n),void 0,r);e=Object.keys(n).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",l),n.addProperty("Arguments",l),n.addMethod("equal",d),n.addMethod("equals",d),n.addMethod("eq",d),n.addMethod("eql",h),n.addMethod("eqls",h),n.addMethod("above",f),n.addMethod("gt",f),n.addMethod("greaterThan",f),n.addMethod("least",p),n.addMethod("gte",p),n.addMethod("greaterThanOrEqual",p),n.addMethod("below",m),n.addMethod("lt",m),n.addMethod("lessThan",m),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("lessThanOrEqual",y),n.addMethod("within",(function(e,r,i){i&&s(this,"message",i);var a,c=s(this,"object"),u=s(this,"doLength"),l=s(this,"message"),d=l?l+": ":"",h=s(this,"ssfi"),f=t.type(c).toLowerCase(),p=t.type(e).toLowerCase(),m=t.type(r).toLowerCase(),y=!0,w="date"===p&&"date"===m?e.toISOString()+".."+r.toISOString():e+".."+r;if(u&&"map"!==f&&"set"!==f&&new n(c,l,h,!0).to.have.property("length"),u||"date"!==f||"date"===p&&"date"===m?"number"===p&&"number"===m||!u&&"number"!==f?u||"date"===f||"number"===f?y=!1:a=d+"expected "+("string"===f?"'"+c+"'":c)+" to be a number or a date":a=d+"the arguments to within must be numbers":a=d+"the arguments to within must be dates",y)throw new o(a,void 0,h);if(u){var b,g="length";"map"===f||"set"===f?(g="size",b=c.size):b=c.length,this.assert(b>=e&&b<=r,"expected #{this} to have a "+g+" within "+w,"expected #{this} to not have a "+g+" within "+w)}else this.assert(c>=e&&c<=r,"expected #{this} to be within "+w,"expected #{this} to not be within "+w)})),n.addMethod("instanceof",w),n.addMethod("instanceOf",w),n.addMethod("property",b),n.addMethod("ownProperty",g),n.addMethod("haveOwnProperty",g),n.addMethod("ownPropertyDescriptor",v),n.addMethod("haveOwnPropertyDescriptor",v),n.addChainableMethod("length",k,x),n.addChainableMethod("lengthOf",k,x),n.addMethod("match",P),n.addMethod("matches",P),n.addMethod("string",(function(e,o){o&&s(this,"message",o);var r=s(this,"object"),i=s(this,"message"),a=s(this,"ssfi");new n(r,i,a,!0).is.a("string"),this.assert(~r.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),n.addMethod("keys",M),n.addMethod("key",M),n.addMethod("throw",_),n.addMethod("throws",_),n.addMethod("Throw",_),n.addMethod("respondTo",S),n.addMethod("respondsTo",S),n.addProperty("itself",(function(){s(this,"itself",!0)})),n.addMethod("satisfy",O),n.addMethod("satisfies",O),n.addMethod("closeTo",j),n.addMethod("approximately",j),n.addMethod("members",(function(e,o){o&&s(this,"message",o);var r=s(this,"object"),i=s(this,"message"),a=s(this,"ssfi");new n(r,i,a,!0).to.be.an("array"),new n(e,i,a,!0).to.be.an("array");var c,u,l,d=s(this,"contains"),h=s(this,"ordered");d?(u="expected #{this} to be "+(c=h?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=h?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+c+" as #{exp}");var f=s(this,"deep")?t.eql:void 0;this.assert(function(e,t,n,o,s){if(!o){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,r){if(s)return n?n(e,t[r]):e===t[r];if(!n){var i=t.indexOf(e);return-1!==i&&(o||t.splice(i,1),!0)}return t.some((function(s,r){return!!n(e,s)&&(o||t.splice(r,1),!0)}))}))}(e,r,f,d,h),u,l,e,r,!0)})),n.addMethod("oneOf",(function(e,o){o&&s(this,"message",o);var r=s(this,"object"),i=s(this,"message"),a=s(this,"ssfi"),c=s(this,"contains"),u=s(this,"deep");new n(e,i,a,!0).to.be.an("array"),c?this.assert(e.some((function(e){return r.indexOf(e)>-1})),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",e,r):u?this.assert(e.some((function(e){return t.eql(r,e)})),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",e,r):this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",E),n.addMethod("changes",E),n.addMethod("increase",D),n.addMethod("increases",D),n.addMethod("decrease",C),n.addMethod("decreases",C),n.addMethod("by",(function(e,t){t&&s(this,"message",t);var n,o=s(this,"deltaMsgObj"),r=s(this,"initialDeltaValue"),i=s(this,"finalDeltaValue"),a=s(this,"deltaBehavior"),c=s(this,"realDelta");n="change"===a?Math.abs(i-r)===Math.abs(e):c===Math.abs(e),this.assert(n,"expected "+o+" to "+a+" by "+e,"expected "+o+" to not "+a+" by "+e)})),n.addProperty("extensible",(function(){var e=s(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=s(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=s(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=s(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},{}],10:[function(e,t,n){t.exports=function(e,t){var n=e.Assertion,o=t.flag,s=e.assert=function(t,o){new n(null,null,e.assert,!0).assert(t,o,"[ negation message unavailable ]")};s.fail=function(t,n,o,r){throw arguments.length<2&&(o=t,t=void 0),o=o||"assert.fail()",new e.AssertionError(o,{actual:t,expected:n,operator:r},s.fail)},s.isOk=function(e,t){new n(e,t,s.isOk,!0).is.ok},s.isNotOk=function(e,t){new n(e,t,s.isNotOk,!0).is.not.ok},s.equal=function(e,t,r){var i=new n(e,r,s.equal,!0);i.assert(t==o(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},s.notEqual=function(e,t,r){var i=new n(e,r,s.notEqual,!0);i.assert(t!=o(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},s.strictEqual=function(e,t,o){new n(e,o,s.strictEqual,!0).to.equal(t)},s.notStrictEqual=function(e,t,o){new n(e,o,s.notStrictEqual,!0).to.not.equal(t)},s.deepEqual=s.deepStrictEqual=function(e,t,o){new n(e,o,s.deepEqual,!0).to.eql(t)},s.notDeepEqual=function(e,t,o){new n(e,o,s.notDeepEqual,!0).to.not.eql(t)},s.isAbove=function(e,t,o){new n(e,o,s.isAbove,!0).to.be.above(t)},s.isAtLeast=function(e,t,o){new n(e,o,s.isAtLeast,!0).to.be.least(t)},s.isBelow=function(e,t,o){new n(e,o,s.isBelow,!0).to.be.below(t)},s.isAtMost=function(e,t,o){new n(e,o,s.isAtMost,!0).to.be.most(t)},s.isTrue=function(e,t){new n(e,t,s.isTrue,!0).is.true},s.isNotTrue=function(e,t){new n(e,t,s.isNotTrue,!0).to.not.equal(!0)},s.isFalse=function(e,t){new n(e,t,s.isFalse,!0).is.false},s.isNotFalse=function(e,t){new n(e,t,s.isNotFalse,!0).to.not.equal(!1)},s.isNull=function(e,t){new n(e,t,s.isNull,!0).to.equal(null)},s.isNotNull=function(e,t){new n(e,t,s.isNotNull,!0).to.not.equal(null)},s.isNaN=function(e,t){new n(e,t,s.isNaN,!0).to.be.NaN},s.isNotNaN=function(e,t){new n(e,t,s.isNotNaN,!0).not.to.be.NaN},s.exists=function(e,t){new n(e,t,s.exists,!0).to.exist},s.notExists=function(e,t){new n(e,t,s.notExists,!0).to.not.exist},s.isUndefined=function(e,t){new n(e,t,s.isUndefined,!0).to.equal(void 0)},s.isDefined=function(e,t){new n(e,t,s.isDefined,!0).to.not.equal(void 0)},s.isFunction=function(e,t){new n(e,t,s.isFunction,!0).to.be.a("function")},s.isNotFunction=function(e,t){new n(e,t,s.isNotFunction,!0).to.not.be.a("function")},s.isObject=function(e,t){new n(e,t,s.isObject,!0).to.be.a("object")},s.isNotObject=function(e,t){new n(e,t,s.isNotObject,!0).to.not.be.a("object")},s.isArray=function(e,t){new n(e,t,s.isArray,!0).to.be.an("array")},s.isNotArray=function(e,t){new n(e,t,s.isNotArray,!0).to.not.be.an("array")},s.isString=function(e,t){new n(e,t,s.isString,!0).to.be.a("string")},s.isNotString=function(e,t){new n(e,t,s.isNotString,!0).to.not.be.a("string")},s.isNumber=function(e,t){new n(e,t,s.isNumber,!0).to.be.a("number")},s.isNotNumber=function(e,t){new n(e,t,s.isNotNumber,!0).to.not.be.a("number")},s.isFinite=function(e,t){new n(e,t,s.isFinite,!0).to.be.finite},s.isBoolean=function(e,t){new n(e,t,s.isBoolean,!0).to.be.a("boolean")},s.isNotBoolean=function(e,t){new n(e,t,s.isNotBoolean,!0).to.not.be.a("boolean")},s.typeOf=function(e,t,o){new n(e,o,s.typeOf,!0).to.be.a(t)},s.notTypeOf=function(e,t,o){new n(e,o,s.notTypeOf,!0).to.not.be.a(t)},s.instanceOf=function(e,t,o){new n(e,o,s.instanceOf,!0).to.be.instanceOf(t)},s.notInstanceOf=function(e,t,o){new n(e,o,s.notInstanceOf,!0).to.not.be.instanceOf(t)},s.include=function(e,t,o){new n(e,o,s.include,!0).include(t)},s.notInclude=function(e,t,o){new n(e,o,s.notInclude,!0).not.include(t)},s.deepInclude=function(e,t,o){new n(e,o,s.deepInclude,!0).deep.include(t)},s.notDeepInclude=function(e,t,o){new n(e,o,s.notDeepInclude,!0).not.deep.include(t)},s.nestedInclude=function(e,t,o){new n(e,o,s.nestedInclude,!0).nested.include(t)},s.notNestedInclude=function(e,t,o){new n(e,o,s.notNestedInclude,!0).not.nested.include(t)},s.deepNestedInclude=function(e,t,o){new n(e,o,s.deepNestedInclude,!0).deep.nested.include(t)},s.notDeepNestedInclude=function(e,t,o){new n(e,o,s.notDeepNestedInclude,!0).not.deep.nested.include(t)},s.ownInclude=function(e,t,o){new n(e,o,s.ownInclude,!0).own.include(t)},s.notOwnInclude=function(e,t,o){new n(e,o,s.notOwnInclude,!0).not.own.include(t)},s.deepOwnInclude=function(e,t,o){new n(e,o,s.deepOwnInclude,!0).deep.own.include(t)},s.notDeepOwnInclude=function(e,t,o){new n(e,o,s.notDeepOwnInclude,!0).not.deep.own.include(t)},s.match=function(e,t,o){new n(e,o,s.match,!0).to.match(t)},s.notMatch=function(e,t,o){new n(e,o,s.notMatch,!0).to.not.match(t)},s.property=function(e,t,o){new n(e,o,s.property,!0).to.have.property(t)},s.notProperty=function(e,t,o){new n(e,o,s.notProperty,!0).to.not.have.property(t)},s.propertyVal=function(e,t,o,r){new n(e,r,s.propertyVal,!0).to.have.property(t,o)},s.notPropertyVal=function(e,t,o,r){new n(e,r,s.notPropertyVal,!0).to.not.have.property(t,o)},s.deepPropertyVal=function(e,t,o,r){new n(e,r,s.deepPropertyVal,!0).to.have.deep.property(t,o)},s.notDeepPropertyVal=function(e,t,o,r){new n(e,r,s.notDeepPropertyVal,!0).to.not.have.deep.property(t,o)},s.ownProperty=function(e,t,o){new n(e,o,s.ownProperty,!0).to.have.own.property(t)},s.notOwnProperty=function(e,t,o){new n(e,o,s.notOwnProperty,!0).to.not.have.own.property(t)},s.ownPropertyVal=function(e,t,o,r){new n(e,r,s.ownPropertyVal,!0).to.have.own.property(t,o)},s.notOwnPropertyVal=function(e,t,o,r){new n(e,r,s.notOwnPropertyVal,!0).to.not.have.own.property(t,o)},s.deepOwnPropertyVal=function(e,t,o,r){new n(e,r,s.deepOwnPropertyVal,!0).to.have.deep.own.property(t,o)},s.notDeepOwnPropertyVal=function(e,t,o,r){new n(e,r,s.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,o)},s.nestedProperty=function(e,t,o){new n(e,o,s.nestedProperty,!0).to.have.nested.property(t)},s.notNestedProperty=function(e,t,o){new n(e,o,s.notNestedProperty,!0).to.not.have.nested.property(t)},s.nestedPropertyVal=function(e,t,o,r){new n(e,r,s.nestedPropertyVal,!0).to.have.nested.property(t,o)},s.notNestedPropertyVal=function(e,t,o,r){new n(e,r,s.notNestedPropertyVal,!0).to.not.have.nested.property(t,o)},s.deepNestedPropertyVal=function(e,t,o,r){new n(e,r,s.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,o)},s.notDeepNestedPropertyVal=function(e,t,o,r){new n(e,r,s.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,o)},s.lengthOf=function(e,t,o){new n(e,o,s.lengthOf,!0).to.have.lengthOf(t)},s.hasAnyKeys=function(e,t,o){new n(e,o,s.hasAnyKeys,!0).to.have.any.keys(t)},s.hasAllKeys=function(e,t,o){new n(e,o,s.hasAllKeys,!0).to.have.all.keys(t)},s.containsAllKeys=function(e,t,o){new n(e,o,s.containsAllKeys,!0).to.contain.all.keys(t)},s.doesNotHaveAnyKeys=function(e,t,o){new n(e,o,s.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},s.doesNotHaveAllKeys=function(e,t,o){new n(e,o,s.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},s.hasAnyDeepKeys=function(e,t,o){new n(e,o,s.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},s.hasAllDeepKeys=function(e,t,o){new n(e,o,s.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},s.containsAllDeepKeys=function(e,t,o){new n(e,o,s.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},s.doesNotHaveAnyDeepKeys=function(e,t,o){new n(e,o,s.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},s.doesNotHaveAllDeepKeys=function(e,t,o){new n(e,o,s.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},s.throws=function(e,t,r,i){("string"==typeof t||t instanceof RegExp)&&(r=t,t=null);var a=new n(e,i,s.throws,!0).to.throw(t,r);return o(a,"object")},s.doesNotThrow=function(e,t,o,r){("string"==typeof t||t instanceof RegExp)&&(o=t,t=null),new n(e,r,s.doesNotThrow,!0).to.not.throw(t,o)},s.operator=function(r,i,a,c){var u;switch(i){case"==":u=r==a;break;case"===":u=r===a;break;case">":u=r>a;break;case">=":u=r>=a;break;case"<":u=r<a;break;case"<=":u=r<=a;break;case"!=":u=r!=a;break;case"!==":u=r!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+i+'"',void 0,s.operator)}var l=new n(u,c,s.operator,!0);l.assert(!0===o(l,"object"),"expected "+t.inspect(r)+" to be "+i+" "+t.inspect(a),"expected "+t.inspect(r)+" to not be "+i+" "+t.inspect(a))},s.closeTo=function(e,t,o,r){new n(e,r,s.closeTo,!0).to.be.closeTo(t,o)},s.approximately=function(e,t,o,r){new n(e,r,s.approximately,!0).to.be.approximately(t,o)},s.sameMembers=function(e,t,o){new n(e,o,s.sameMembers,!0).to.have.same.members(t)},s.notSameMembers=function(e,t,o){new n(e,o,s.notSameMembers,!0).to.not.have.same.members(t)},s.sameDeepMembers=function(e,t,o){new n(e,o,s.sameDeepMembers,!0).to.have.same.deep.members(t)},s.notSameDeepMembers=function(e,t,o){new n(e,o,s.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},s.sameOrderedMembers=function(e,t,o){new n(e,o,s.sameOrderedMembers,!0).to.have.same.ordered.members(t)},s.notSameOrderedMembers=function(e,t,o){new n(e,o,s.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},s.sameDeepOrderedMembers=function(e,t,o){new n(e,o,s.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},s.notSameDeepOrderedMembers=function(e,t,o){new n(e,o,s.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},s.includeMembers=function(e,t,o){new n(e,o,s.includeMembers,!0).to.include.members(t)},s.notIncludeMembers=function(e,t,o){new n(e,o,s.notIncludeMembers,!0).to.not.include.members(t)},s.includeDeepMembers=function(e,t,o){new n(e,o,s.includeDeepMembers,!0).to.include.deep.members(t)},s.notIncludeDeepMembers=function(e,t,o){new n(e,o,s.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},s.includeOrderedMembers=function(e,t,o){new n(e,o,s.includeOrderedMembers,!0).to.include.ordered.members(t)},s.notIncludeOrderedMembers=function(e,t,o){new n(e,o,s.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},s.includeDeepOrderedMembers=function(e,t,o){new n(e,o,s.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},s.notIncludeDeepOrderedMembers=function(e,t,o){new n(e,o,s.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},s.oneOf=function(e,t,o){new n(e,o,s.oneOf,!0).to.be.oneOf(t)},s.changes=function(e,t,o,r){3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.changes,!0).to.change(t,o)},s.changesBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.changesBy,!0).to.change(t,o).by(r)},s.doesNotChange=function(e,t,o,r){return 3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.doesNotChange,!0).to.not.change(t,o)},s.changesButNotBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.changesButNotBy,!0).to.change(t,o).but.not.by(r)},s.increases=function(e,t,o,r){return 3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.increases,!0).to.increase(t,o)},s.increasesBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.increasesBy,!0).to.increase(t,o).by(r)},s.doesNotIncrease=function(e,t,o,r){return 3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.doesNotIncrease,!0).to.not.increase(t,o)},s.increasesButNotBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.increasesButNotBy,!0).to.increase(t,o).but.not.by(r)},s.decreases=function(e,t,o,r){return 3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.decreases,!0).to.decrease(t,o)},s.decreasesBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.decreasesBy,!0).to.decrease(t,o).by(r)},s.doesNotDecrease=function(e,t,o,r){return 3===arguments.length&&"function"==typeof t&&(r=o,o=null),new n(e,r,s.doesNotDecrease,!0).to.not.decrease(t,o)},s.doesNotDecreaseBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);return new n(e,i,s.doesNotDecreaseBy,!0).to.not.decrease(t,o).by(r)},s.decreasesButNotBy=function(e,t,o,r,i){if(4===arguments.length&&"function"==typeof t){var a=r;r=o,i=a}else 3===arguments.length&&(r=o,o=null);new n(e,i,s.decreasesButNotBy,!0).to.decrease(t,o).but.not.by(r)},s.ifError=function(e){if(e)throw e},s.isExtensible=function(e,t){new n(e,t,s.isExtensible,!0).to.be.extensible},s.isNotExtensible=function(e,t){new n(e,t,s.isNotExtensible,!0).to.not.be.extensible},s.isSealed=function(e,t){new n(e,t,s.isSealed,!0).to.be.sealed},s.isNotSealed=function(e,t){new n(e,t,s.isNotSealed,!0).to.not.be.sealed},s.isFrozen=function(e,t){new n(e,t,s.isFrozen,!0).to.be.frozen},s.isNotFrozen=function(e,t){new n(e,t,s.isNotFrozen,!0).to.not.be.frozen},s.isEmpty=function(e,t){new n(e,t,s.isEmpty,!0).to.be.empty},s.isNotEmpty=function(e,t){new n(e,t,s.isNotEmpty,!0).to.not.be.empty},function e(t,n){return s[n]=s[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},{}],11:[function(e,t,n){t.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,o,s){throw arguments.length<2&&(o=t,t=void 0),o=o||"expect.fail()",new e.AssertionError(o,{actual:t,expected:n,operator:s},e.expect.fail)}}},{}],12:[function(e,t,n){t.exports=function(e,t){var n=e.Assertion;function o(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol||"function"==typeof BigInt&&this instanceof BigInt?new n(this.valueOf(),null,e):new n(this,null,e)},configurable:!0});var t={fail:function(n,o,s,r){throw arguments.length<2&&(s=n,n=void 0),s=s||"should.fail()",new e.AssertionError(s,{actual:n,expected:o,operator:r},t.fail)},equal:function(e,t,o){new n(e,o).to.equal(t)},Throw:function(e,t,o,s){new n(e,s).to.Throw(t,o)},exist:function(e,t){new n(e,t).to.exist},not:{}};return t.not.equal=function(e,t,o){new n(e,o).to.not.equal(t)},t.not.Throw=function(e,t,o,s){new n(e,s).to.not.Throw(t,o)},t.not.exist=function(e,t){new n(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=o,e.Should=o}},{}],13:[function(e,t,n){var o=e("./addLengthGuard"),s=e("../../chai"),r=e("./flag"),i=e("./proxify"),a=e("./transferFlags"),c="function"==typeof Object.setPrototypeOf,u=function(){},l=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),d=Function.prototype.call,h=Function.prototype.apply;t.exports=function(e,t,n,u){"function"!=typeof u&&(u=function(){});var f={method:n,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=f,Object.defineProperty(e,t,{get:function(){f.chainingBehavior.call(this);var n=function(){r(this,"lockSsfi")||r(this,"ssfi",n);var e=f.method.apply(this,arguments);if(void 0!==e)return e;var t=new s.Assertion;return a(this,t),t};if(o(n,t,!0),c){var u=Object.create(this);u.call=d,u.apply=h,Object.setPrototypeOf(n,u)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o)}}));return a(this,n),i(n)},configurable:!0})}},{"../../chai":6,"./addLengthGuard":14,"./flag":19,"./proxify":34,"./transferFlags":36}],14:[function(e,t,n){var o=Object.getOwnPropertyDescriptor((function(){}),"length");t.exports=function(e,t,n){return o.configurable?(Object.defineProperty(e,"length",{get:function(){if(n)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},{}],15:[function(e,t,n){var o=e("./addLengthGuard"),s=e("../../chai"),r=e("./flag"),i=e("./proxify"),a=e("./transferFlags");t.exports=function(e,t,n){var c=function(){r(this,"lockSsfi")||r(this,"ssfi",c);var e=n.apply(this,arguments);if(void 0!==e)return e;var t=new s.Assertion;return a(this,t),t};o(c,t,!1),e[t]=i(c,t)}},{"../../chai":6,"./addLengthGuard":14,"./flag":19,"./proxify":34,"./transferFlags":36}],16:[function(e,t,n){var o=e("../../chai"),s=e("./flag"),r=e("./isProxyEnabled"),i=e("./transferFlags");t.exports=function(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:function e(){r()||s(this,"lockSsfi")||s(this,"ssfi",e);var t=n.call(this);if(void 0!==t)return t;var a=new o.Assertion;return i(this,a),a},configurable:!0})}},{"../../chai":6,"./flag":19,"./isProxyEnabled":29,"./transferFlags":36}],17:[function(e,t,n){var o=e("./inspect");t.exports=function(e,t){return o(e)<o(t)?-1:1}},{"./inspect":27}],18:[function(e,t,n){var o=e("assertion-error"),s=e("./flag"),r=e("type-detect");t.exports=function(e,t){var n=s(e,"message"),i=s(e,"ssfi");n=n?n+": ":"",e=s(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,n){var o=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+o+" "+e})).join(", "),c=r(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new o(n+"object tested must be "+a+", but "+c+" given",void 0,i)}},{"./flag":19,"assertion-error":1,"type-detect":44}],19:[function(e,t,n){t.exports=function(e,t,n){var o=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return o[t];o[t]=n}},{}],20:[function(e,t,n){t.exports=function(e,t){return t.length>4?t[4]:e._obj}},{}],21:[function(e,t,n){var o=e("./flag"),s=e("./getActual"),r=e("./objDisplay");t.exports=function(e,t){var n=o(e,"negate"),i=o(e,"object"),a=t[3],c=s(e,t),u=n?t[2]:t[1],l=o(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return r(i)})).replace(/#\{act\}/g,(function(){return r(c)})).replace(/#\{exp\}/g,(function(){return r(a)})),l?l+": "+u:u}},{"./flag":19,"./getActual":20,"./objDisplay":30}],22:[function(e,t,n){var o=e("type-detect"),s=e("./flag");t.exports=function(e,t){var n=s(e,"operator"),r=s(e,"negate"),i=t[3],a=r?t[2]:t[1];if(n)return n;if("function"==typeof a&&(a=a()),(a=a||"")&&!/\shave\s/.test(a)){var c=function(e){var t=o(e);return-1!==["Array","Object","function"].indexOf(t)}(i);return/\snot\s/.test(a)?c?"notDeepStrictEqual":"notStrictEqual":c?"deepStrictEqual":"strictEqual"}}},{"./flag":19,"type-detect":44}],23:[function(e,t,n){var o=e("./getOwnEnumerablePropertySymbols");t.exports=function(e){return Object.keys(e).concat(o(e))}},{"./getOwnEnumerablePropertySymbols":24}],24:[function(e,t,n){t.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},{}],25:[function(e,t,n){t.exports=function(e){var t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}for(var o=Object.getPrototypeOf(e);null!==o;)Object.getOwnPropertyNames(o).forEach(n),o=Object.getPrototypeOf(o);return t}},{}],26:[function(e,t,n){var o=e("pathval");n.test=e("./test"),n.type=e("type-detect"),n.expectTypes=e("./expectTypes"),n.getMessage=e("./getMessage"),n.getActual=e("./getActual"),n.inspect=e("./inspect"),n.objDisplay=e("./objDisplay"),n.flag=e("./flag"),n.transferFlags=e("./transferFlags"),n.eql=e("deep-eql"),n.getPathInfo=o.getPathInfo,n.hasProperty=o.hasProperty,n.getName=e("get-func-name"),n.addProperty=e("./addProperty"),n.addMethod=e("./addMethod"),n.overwriteProperty=e("./overwriteProperty"),n.overwriteMethod=e("./overwriteMethod"),n.addChainableMethod=e("./addChainableMethod"),n.overwriteChainableMethod=e("./overwriteChainableMethod"),n.compareByInspect=e("./compareByInspect"),n.getOwnEnumerablePropertySymbols=e("./getOwnEnumerablePropertySymbols"),n.getOwnEnumerableProperties=e("./getOwnEnumerableProperties"),n.checkError=e("check-error"),n.proxify=e("./proxify"),n.addLengthGuard=e("./addLengthGuard"),n.isProxyEnabled=e("./isProxyEnabled"),n.isNaN=e("./isNaN"),n.getOperator=e("./getOperator")},{"./addChainableMethod":13,"./addLengthGuard":14,"./addMethod":15,"./addProperty":16,"./compareByInspect":17,"./expectTypes":18,"./flag":19,"./getActual":20,"./getMessage":21,"./getOperator":22,"./getOwnEnumerableProperties":23,"./getOwnEnumerablePropertySymbols":24,"./inspect":27,"./isNaN":28,"./isProxyEnabled":29,"./objDisplay":30,"./overwriteChainableMethod":31,"./overwriteMethod":32,"./overwriteProperty":33,"./proxify":34,"./test":35,"./transferFlags":36,"check-error":37,"deep-eql":38,"get-func-name":39,pathval:42,"type-detect":44}],27:[function(e,t,n){e("get-func-name");var o=e("loupe"),s=e("../config");t.exports=function(e,t,n,r){var i={colors:r,depth:void 0===n?2:n,showHidden:t,truncate:s.truncateThreshold?s.truncateThreshold:1/0};return o.inspect(e,i)}},{"../config":8,"get-func-name":39,loupe:41}],28:[function(e,t,n){t.exports=Number.isNaN||function(e){return e!=e}},{}],29:[function(e,t,n){var o=e("../config");t.exports=function(){return o.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},{"../config":8}],30:[function(e,t,n){var o=e("./inspect"),s=e("../config");t.exports=function(e){var t=o(e),n=Object.prototype.toString.call(e);if(s.truncateThreshold&&t.length>=s.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var r=Object.keys(e);return"{ Object ("+(r.length>2?r.splice(0,2).join(", ")+", ...":r.join(", "))+") }"}return t}return t}},{"../config":8,"./inspect":27}],31:[function(e,t,n){var o=e("../../chai"),s=e("./transferFlags");t.exports=function(e,t,n,r){var i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=function(){var e=r(a).call(this);if(void 0!==e)return e;var t=new o.Assertion;return s(this,t),t};var c=i.method;i.method=function(){var e=n(c).apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return s(this,t),t}}},{"../../chai":6,"./transferFlags":36}],32:[function(e,t,n){var o=e("./addLengthGuard"),s=e("../../chai"),r=e("./flag"),i=e("./proxify"),a=e("./transferFlags");t.exports=function(e,t,n){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var l=function(){r(this,"lockSsfi")||r(this,"ssfi",l);var e=r(this,"lockSsfi");r(this,"lockSsfi",!0);var t=n(u).apply(this,arguments);if(r(this,"lockSsfi",e),void 0!==t)return t;var o=new s.Assertion;return a(this,o),o};o(l,t,!1),e[t]=i(l,t)}},{"../../chai":6,"./addLengthGuard":14,"./flag":19,"./proxify":34,"./transferFlags":36}],33:[function(e,t,n){var o=e("../../chai"),s=e("./flag"),r=e("./isProxyEnabled"),i=e("./transferFlags");t.exports=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){r()||s(this,"lockSsfi")||s(this,"ssfi",e);var t=s(this,"lockSsfi");s(this,"lockSsfi",!0);var a=n(c).call(this);if(s(this,"lockSsfi",t),void 0!==a)return a;var u=new o.Assertion;return i(this,u),u},configurable:!0})}},{"../../chai":6,"./flag":19,"./isProxyEnabled":29,"./transferFlags":36}],34:[function(e,t,n){var o=e("../config"),s=e("./flag"),r=e("./getProperties"),i=e("./isProxyEnabled"),a=["__flags","__methods","_obj","assert"];t.exports=function(e,t){return i()?new Proxy(e,{get:function e(n,i){if("string"==typeof i&&-1===o.proxyExcludedKeys.indexOf(i)&&!Reflect.has(n,i)){if(t)throw Error("Invalid Chai property: "+t+"."+i+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw r(n).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;for(var o=[],s=0;s<=e.length;s++)o[s]=Array(t.length+1).fill(0),o[s][0]=s;for(var r=0;r<t.length;r++)o[0][r]=r;for(s=1;s<=e.length;s++){var i=e.charCodeAt(s-1);for(r=1;r<=t.length;r++)Math.abs(s-r)>=n?o[s][r]=n:o[s][r]=Math.min(o[s-1][r]+1,o[s][r-1]+1,o[s-1][r-1]+(i===t.charCodeAt(r-1)?0:1))}return o[e.length][t.length]}(i,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+i+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+i)}return-1!==a.indexOf(i)||s(n,"lockSsfi")||s(n,"ssfi",e),Reflect.get(n,i)}}):e}},{"../config":8,"./flag":19,"./getProperties":25,"./isProxyEnabled":29}],35:[function(e,t,n){var o=e("./flag");t.exports=function(e,t){var n=o(e,"negate"),s=t[0];return n?!s:s}},{"./flag":19}],36:[function(e,t,n){t.exports=function(e,t,n){var o=e.__flags||(e.__flags=Object.create(null));for(var s in t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n,o)(n||"object"!==s&&"ssfi"!==s&&"lockSsfi"!==s&&"message"!=s)&&(t.__flags[s]=o[s])}},{}],37:[function(e,t,n){"use strict";var o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function s(e){var t="";if(void 0===e.name){var n=String(e).match(o);n&&(t=n[1])}else t=e.name;return t}t.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var n="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=s(e.constructor):"function"==typeof e&&(t=s(e).trim()||s(new e)),t}}},{}],38:[function(e,t,n){"use strict";var o=e("type-detect");function s(){this._key="chai/deep-eql__"+Math.random()+Date.now()}s.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var r="function"==typeof WeakMap?WeakMap:s;function i(e,t,n){if(!n||w(e)||w(t))return null;var o=n.get(e);if(o){var s=o.get(t);if("boolean"==typeof s)return s}return null}function a(e,t,n,o){if(n&&!w(e)&&!w(t)){var s=n.get(e);s?s.set(t,o):((s=new r).set(t,o),n.set(e,s))}}function c(e,t,n){if(n&&n.comparator)return l(e,t,n);var o=u(e,t);return null!==o?o:l(e,t,n)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!w(e)&&!w(t)&&null}function l(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new r);var s=n&&n.comparator,l=i(e,t,n.memoize);if(null!==l)return l;var w=i(t,e,n.memoize);if(null!==w)return w;if(s){var g=s(e,t);if(!1===g||!0===g)return a(e,t,n.memoize,g),g;var v=u(e,t);if(null!==v)return v}var x=o(e);if(x!==o(t))return a(e,t,n.memoize,!1),!1;a(e,t,n.memoize,!0);var k=function(e,t,n,o){switch(n){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return y(e,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,o);case"RegExp":return function(e,t){return e.toString()===t.toString()}(e,t);case"Generator":return function(e,t,n){return d(f(e),f(t),n)}(e,t,o);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),o);case"Set":case"Map":return function(e,t,n){if(e.size!==t.size)return!1;if(0===e.size)return!0;var o=[],s=[];return e.forEach((function(e,t){o.push([e,t])})),t.forEach((function(e,t){s.push([e,t])})),d(o.sort(),s.sort(),n)}(e,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return function(e,t,n){var o=p(e),s=p(t),r=m(e),i=m(t);if(o=o.concat(r),s=s.concat(i),o.length&&o.length===s.length)return!1!==d(b(o).sort(),b(s).sort())&&y(e,t,o,n);var a=h(e),c=h(t);return a.length&&a.length===c.length?(a.sort(),c.sort(),d(a,c,n)):0===o.length&&0===a.length&&0===s.length&&0===c.length}(e,t,o)}}(e,t,x,n);return a(e,t,n.memoize,k),k}function d(e,t,n){var o=e.length;if(o!==t.length)return!1;if(0===o)return!0;for(var s=-1;++s<o;)if(!1===c(e[s],t[s],n))return!1;return!0}function h(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return f(e[Symbol.iterator]())}catch(e){return[]}return[]}function f(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}function p(e){var t=[];for(var n in e)t.push(n);return t}function m(e){for(var t=[],n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o+=1){var s=n[o];Object.getOwnPropertyDescriptor(e,s).enumerable&&t.push(s)}return t}function y(e,t,n,o){var s=n.length;if(0===s)return!0;for(var r=0;r<s;r+=1)if(!1===c(e[n[r]],t[n[r]],o))return!1;return!0}function w(e){return null===e||"object"!=typeof e}function b(e){return e.map((function(e){return"symbol"==typeof e?e.toString():e}))}t.exports=c,t.exports.MemoizeMap=r},{"type-detect":44}],39:[function(e,t,n){"use strict";var o=Function.prototype.toString,s=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;t.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=o.call(e).match(s);n&&(t=n[1])}else t=e.name;return t}},{}],40:[function(e,t,n){n.read=function(e,t,n,o,s){var r,i,a=8*s-o-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?s-1:0,h=n?-1:1,f=e[t+d];for(d+=h,r=f&(1<<-l)-1,f>>=-l,l+=a;l>0;r=256*r+e[t+d],d+=h,l-=8);for(i=r&(1<<-l)-1,r>>=-l,l+=o;l>0;i=256*i+e[t+d],d+=h,l-=8);if(0===r)r=1-u;else{if(r===c)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,o),r-=u}return(f?-1:1)*i*Math.pow(2,r-o)},n.write=function(e,t,n,o,s,r){var i,a,c,u=8*r-s-1,l=(1<<u)-1,d=l>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:r-1,p=o?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=l?(a=0,i=l):i+d>=1?(a=(t*c-1)*Math.pow(2,s),i+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,s),i=0));s>=8;e[n+f]=255&a,f+=p,a/=256,s-=8);for(i=i<<s|a,u+=s;u>0;e[n+f]=255&i,f+=p,i/=256,u-=8);e[n+f-p]|=128*m}},{}],41:[function(e,t,n){(function(o,s){(function(){!function(e,o){"object"==typeof n&&void 0!==t?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).loupe={})}(this,(function(t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,s=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var a={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},c={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},u="";function l(e,t){var n=a[c[t]]||a[t];return n?"[".concat(n[0],"m").concat(String(e),"[").concat(n[1],"m"):String(e)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;e=String(e);var o=n.length,s=e.length;return o>t&&s>o?n:s>t&&s>o?"".concat(e.slice(0,t-o)).concat(n):e}function h(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:", ";n=n||t.inspect;var s=e.length;if(0===s)return"";for(var r=t.truncate,i="",a="",c="",l=0;l<s;l+=1){var d=l+1===e.length,h=l+2===e.length;c="".concat(u,"(").concat(e.length-l,")");var f=e[l];t.truncate=r-i.length-(d?0:o.length);var p=a||n(f,t)+(d?"":o),m=i.length+p.length,y=m+c.length;if(d&&m>r&&i.length+c.length<=r)break;if(!d&&!h&&y>r)break;if(a=d?"":n(e[l+1],t)+(h?"":o),!d&&h&&y>r&&m+a.length>r)break;if(i+=p,!d&&!h&&m+a.length>=r){c="".concat(u,"(").concat(e.length-l-1,")");break}c=""}return"".concat(i).concat(c)}function f(e,t){var n=r(e,2),o=n[0],s=n[1];return t.truncate-=2,"string"==typeof o?o=function(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}(o):"number"!=typeof o&&(o="[".concat(t.inspect(o,t),"]")),t.truncate-=o.length,s=t.inspect(s,t),"".concat(o,": ").concat(s)}var p=Function.prototype.toString,m=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/,y=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var n=p.call(e).match(m);n&&(t=n[1])}else t=e.name;return t};function w(e,t){var n=function(e){return"function"==typeof s&&e instanceof s?"Buffer":e[Symbol.toStringTag]?e[Symbol.toStringTag]:y(e.constructor)}(e);t.truncate-=n.length+4;var o=Object.keys(e).slice(e.length);if(!e.length&&!o.length)return"".concat(n,"[]");for(var r="",i=0;i<e.length;i++){var a="".concat(t.stylize(d(e[i],t.truncate),"number")).concat(i===e.length-1?"":", ");if(t.truncate-=a.length,e[i]!==e.length&&t.truncate<=3){r+="".concat(u,"(").concat(e.length-e[i]+1,")");break}r+=a}var c="";return o.length&&(c=h(o.map((function(t){return[t,e[t]]})),t,f)),"".concat(n,"[ ").concat(r).concat(c?", ".concat(c):""," ]")}function b(e,t){var n=y(e);return n?t.stylize("[Function ".concat(d(n,t.truncate-11),"]"),"special"):t.stylize("[Function]","special")}function g(e,t){var n=r(e,2),o=n[0],s=n[1];return t.truncate-=4,o=t.inspect(o,t),t.truncate-=o.length,s=t.inspect(s,t),"".concat(o," => ").concat(s)}var v=Number.isNaN||function(e){return e!=e};function x(e,t){return v(e)?t.stylize("NaN","number"):e===1/0?t.stylize("Infinity","number"):e===-1/0?t.stylize("-Infinity","number"):0===e?t.stylize(1/e==1/0?"+0":"-0","number"):t.stylize(d(e,t.truncate),"number")}function k(e,t){var n=d(e.toString(),t.truncate-1);return n!==u&&(n+="n"),t.stylize(n,"bigint")}var P=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},_=16,S=4;function O(e){return M[e]||"\\u".concat("0000".concat(e.charCodeAt(0).toString(_)).slice(-S))}function j(e,t){return P.test(e)&&(e=e.replace(P,O)),t.stylize("'".concat(d(e,t.truncate-2),"'"),"string")}function E(e){return"description"in Symbol.prototype?e.description?"Symbol(".concat(e.description,")"):"Symbol()":e.toString()}var D=function(){return"Promise{}"};try{var C=o.binding("util"),T=C.getPromiseDetails,A=C.kPending,B=C.kRejected;Array.isArray(T(Promise.resolve()))&&(D=function(e,t){var n=r(T(e),2),o=n[0],s=n[1];return o===A?"Promise{<pending>}":"Promise".concat(o===B?"!":"","{").concat(t.inspect(s,t),"}")})}catch(e){}var N=D;function z(e,t){var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(0===n.length&&0===o.length)return"{}";if(t.truncate-=4,t.seen=t.seen||[],t.seen.indexOf(e)>=0)return"[Circular]";t.seen.push(e);var s=h(n.map((function(t){return[t,e[t]]})),t,f),r=h(o.map((function(t){return[t,e[t]]})),t,f);t.seen.pop();var i="";return s&&r&&(i=", "),"{ ".concat(s).concat(i).concat(r," }")}var F=!("undefined"==typeof Symbol||!Symbol.toStringTag)&&Symbol.toStringTag,I=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function L(e,t){var n=r(e,2),o=n[0],s=n[1];return t.truncate-=3,s?"".concat(t.stylize(o,"yellow"),"=").concat(t.stylize('"'.concat(s,'"'),"string")):"".concat(t.stylize(o,"yellow"))}function q(e,t){return h(e,t,K,"\n")}function K(e,t){var n=e.getAttributeNames(),o=e.tagName.toLowerCase(),s=t.stylize("<".concat(o),"special"),r=t.stylize(">","special"),i=t.stylize("</".concat(o,">"),"special");t.truncate-=2*o.length+5;var a="";n.length>0&&(a+=" ",a+=h(n.map((function(t){return[t,e.getAttribute(t)]})),t,L," ")),t.truncate-=a.length;var c=t.truncate,l=q(e.children,t);return l&&l.length>c&&(l="".concat(u,"(").concat(e.children.length,")")),"".concat(s).concat(a).concat(r).concat(l).concat(i)}var R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("chai/inspect"):"@@chai/inspect",U=!1;try{var W=e("util");U=!!W.inspect&&W.inspect.custom}catch(e){U=!1}var H=new WeakMap,G={},J={undefined:function(e,t){return t.stylize("undefined","undefined")},null:function(e,t){return t.stylize(null,"null")},boolean:function(e,t){return t.stylize(e,"boolean")},Boolean:function(e,t){return t.stylize(e,"boolean")},number:x,Number:x,bigint:k,BigInt:k,string:j,String:j,function:b,Function:b,symbol:E,Symbol:E,Array:function(e,t){var n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return"[]";t.truncate-=4;var o=h(e,t);t.truncate-=o.length;var s="";return n.length&&(s=h(n.map((function(t){return[t,e[t]]})),t,f)),"[ ".concat(o).concat(s?", ".concat(s):""," ]")},Date:function(e,t){var n=e.toJSON().split("T"),o=n[0];return t.stylize("".concat(o,"T").concat(d(n[1],t.truncate-o.length-1)),"date")},Map:function(e,t){return e.size-1<=0?"Map{}":(t.truncate-=7,"Map{ ".concat(h(function(e){var t=[];return e.forEach((function(e,n){t.push([n,e])})),t}(e),t,g)," }"))},Set:function(e,t){return 0===e.size?"Set{}":(t.truncate-=7,"Set{ ".concat(h(function(e){var t=[];return e.forEach((function(e){t.push(e)})),t}(e),t)," }"))},RegExp:function(e,t){var n=e.toString().split("/")[2],o=t.truncate-(2+n.length),s=e.source;return t.stylize("/".concat(d(s,o),"/").concat(n),"regexp")},Promise:N,WeakSet:function(e,t){return t.stylize("WeakSet{}","special")},WeakMap:function(e,t){return t.stylize("WeakMap{}","special")},Arguments:function(e,t){return 0===e.length?"Arguments[]":(t.truncate-=13,"Arguments[ ".concat(h(e,t)," ]"))},Int8Array:w,Uint8Array:w,Uint8ClampedArray:w,Int16Array:w,Uint16Array:w,Int32Array:w,Uint32Array:w,Float32Array:w,Float64Array:w,Generator:function(){return""},DataView:function(){return""},ArrayBuffer:function(){return""},Error:function(e,t){var n=Object.getOwnPropertyNames(e).filter((function(e){return-1===I.indexOf(e)})),o=e.name;t.truncate-=o.length;var s="";"string"==typeof e.message?s=d(e.message,t.truncate):n.unshift("message"),s=s?": ".concat(s):"",t.truncate-=s.length+5;var r=h(n.map((function(t){return[t,e[t]]})),t,f);return"".concat(o).concat(s).concat(r?" { ".concat(r," }"):"")},HTMLCollection:q,NodeList:q},V=Object.prototype.toString;function X(e,t){t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showHidden,n=void 0!==t&&t,o=e.depth,s=void 0===o?2:o,r=e.colors,i=void 0!==r&&r,a=e.customInspect,c=void 0===a||a,u=e.showProxy,d=void 0!==u&&u,h=e.maxArrayLength,f=void 0===h?1/0:h,p=e.breakLength,m=void 0===p?1/0:p,y=e.seen,w=void 0===y?[]:y,b=e.truncate,g=void 0===b?1/0:b,v=e.stylize,x=void 0===v?String:v,k={showHidden:Boolean(n),depth:Number(s),colors:Boolean(i),customInspect:Boolean(c),showProxy:Boolean(d),maxArrayLength:Number(f),breakLength:Number(m),truncate:Number(g),seen:w,stylize:x};return k.colors&&(k.stylize=l),k}(t),t.inspect=X;var o=t.customInspect,s=null===e?"null":n(e);if("object"===s&&(s=V.call(e).slice(8,-1)),J[s])return J[s](e,t);if(o&&e){var r=function(e,t,n){return R in e&&"function"==typeof e[R]?e[R](t):U&&U in e&&"function"==typeof e[U]?e[U](t.depth,t):"inspect"in e&&"function"==typeof e.inspect?e.inspect(t.depth,t):"constructor"in e&&H.has(e.constructor)?H.get(e.constructor)(e,t):G[n]?G[n](e,t):""}(e,t,s);if(r)return"string"==typeof r?r:X(r,t)}var i=!!e&&Object.getPrototypeOf(e);return i===Object.prototype||null===i?z(e,t):e&&"function"==typeof HTMLElement&&e instanceof HTMLElement?K(e,t):"constructor"in e?e.constructor!==Object?function(e,t){var n="";return F&&F in e&&(n=e[F]),(n=n||y(e.constructor))&&"_class"!==n||(n="<Anonymous Class>"),t.truncate-=n.length,"".concat(n).concat(z(e,t))}(e,t):z(e,t):e===Object(e)?z(e,t):t.stylize(String(e),s)}var Z=R;t.custom=Z,t.default=X,t.inspect=X,t.registerConstructor=function(e,t){return!H.has(e)&&(H.add(e,t),!0)},t.registerStringTag=function(e,t){return!(e in G)&&(G[e]=t,!0)},Object.defineProperty(t,"__esModule",{value:!0})}))}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:43,buffer:4,util:3}],42:[function(e,t,n){"use strict";function o(e,t){return null!=e&&t in Object(e)}function s(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){if("constructor"===e||"__proto__"===e||"prototype"===e)return{};var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.[\]])/g,"$1")}}))}function r(e,t,n){var o=e,s=null;n=void 0===n?t.length:n;for(var r=0;r<n;r++){var i=t[r];o&&(o=void 0===i.p?o[i.i]:o[i.p],r===n-1&&(s=o))}return s}function i(e,t){var n=s(t),i=n[n.length-1],a={parent:n.length>1?r(e,n,n.length-1):e,name:i.p||i.i,value:r(e,n)};return a.exists=o(a.parent,a.name),a}t.exports={hasProperty:o,getPathInfo:i,getPathValue:function(e,t){return i(e,t).value},setPathValue:function(e,t,n){return function(e,t,n){for(var o=e,s=n.length,r=null,i=0;i<s;i++){var a=null,c=null;if(r=n[i],i===s-1)o[a=void 0===r.p?r.i:r.p]=t;else if(void 0!==r.p&&o[r.p])o=o[r.p];else if(void 0!==r.i&&o[r.i])o=o[r.i];else{var u=n[i+1];a=void 0===r.p?r.i:r.p,c=void 0===u.p?[]:{},o[a]=c,o=o[a]}}}(e,n,s(t)),e}}},{}],43:[function(e,t,n){var o,s,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(o===setTimeout)return setTimeout(e,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var u,l=[],d=!1,h=-1;function f(){d&&u&&(d=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!d){var e=c(f);d=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],44:[function(e,t,n){(function(e){(function(){!function(e,o){"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):e.typeDetect=o()}(this,(function(){"use strict";var t="function"==typeof Promise,n="object"==typeof self?self:e,o="undefined"!=typeof Symbol,s="undefined"!=typeof Map,r="undefined"!=typeof Set,i="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,u=o&&void 0!==Symbol.iterator,l=o&&void 0!==Symbol.toStringTag,d=r&&"function"==typeof Set.prototype.entries,h=s&&"function"==typeof Map.prototype.entries,f=d&&Object.getPrototypeOf((new Set).entries()),p=h&&Object.getPrototypeOf((new Map).entries()),m=u&&"function"==typeof Array.prototype[Symbol.iterator],y=m&&Object.getPrototypeOf([][Symbol.iterator]()),w=u&&"function"==typeof String.prototype[Symbol.iterator],b=w&&Object.getPrototypeOf(""[Symbol.iterator]());return function(e){var o=typeof e;if("object"!==o)return o;if(null===e)return"null";if(e===n)return"global";if(Array.isArray(e)&&(!1===l||!(Symbol.toStringTag in e)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&e===window.location)return"Location";if("object"==typeof window.document&&e===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&e===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if("BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if("TD"===e.tagName)return"HTMLTableDataCellElement";if("TH"===e.tagName)return"HTMLTableHeaderCellElement"}}var u=l&&e[Symbol.toStringTag];if("string"==typeof u)return u;var d=Object.getPrototypeOf(e);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":t&&d===Promise.prototype?"Promise":r&&d===Set.prototype?"Set":s&&d===Map.prototype?"Map":a&&d===WeakSet.prototype?"WeakSet":i&&d===WeakMap.prototype?"WeakMap":c&&d===DataView.prototype?"DataView":s&&d===p?"Map Iterator":r&&d===f?"Set Iterator":m&&d===y?"Array Iterator":w&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(e).slice(8,-1)}}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Build=void 0,n.Build={version:"8.2.0 (3601038000c463cb41c69063268c3265)",buildSeed:1725696037739,"wdosbox-x.wasm":{size:6304557,gzSize:2294344},"wdosbox-x.js":{size:230427,gzSize:54620},"wdosbox.wasm":{size:1467780,gzSize:499720},"wdosbox.js":{size:108170,gzSize:28965},"wlibzip.wasm":{size:112408,gzSize:52240},"wlibzip.js":{size:74095,gzSize:19630}}},{}],46:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConfig=void 0;const s=e("../../libzip/libzip"),r=e("../../http"),i=e("../../build");n.default=class{constructor(e){o(this,"dosboxConf",n.defaultConfig),o(this,"jsdosConf",{version:i.Build.version}),o(this,"sources",void 0),o(this,"libzipWasm",void 0),this.sources=[],this.libzipWasm=e}autoexec(){const e=this.dosboxConf.indexOf("[autoexec]");for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.dosboxConf=this.dosboxConf.substring(0,e)+"[autoexec]\nmount c .\nc:\n"+n.join("\n"),this}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zip";return this.extractAll([{url:e,path:t,type:n}])}extractAll(e){return this.sources.push(...e),this}async toUint8Array(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={};await this.libzipWasm.instantiate(t);const n=new s.default(t),o=[];for(const e of this.sources){if("zip"!==e.type)throw new Error("Only Zip is supported");const t=(0,r.httpRequest)(e.url,{responseType:"arraybuffer"}).then((t=>({source:e,data:new Uint8Array(t)})));o.push(t)}e||(await n.writeFile(".jsdos/dosbox.conf",this.dosboxConf),await n.writeFile(".jsdos/readme.txt",a),await n.writeFile(".jsdos/jsdos.json",JSON.stringify(this.jsdosConf,null,2)));const i=await Promise.all(o);for(const e of i)n.zipToFs(e.data,e.source.path);e&&(await n.writeFile(".jsdos/dosbox.conf",this.dosboxConf),await n.writeFile(".jsdos/readme.txt",a),await n.writeFile(".jsdos/jsdos.json",JSON.stringify(this.jsdosConf,null,2)));const c=await n.zipFromFs();return n.destroy(),c}};const a="\nPlease visit our website:\n\n        _                __\n       (_)____      ____/ /___  _____ _________  ____ ___\n      / / ___/_____/ __  / __ \\/ ___// ___/ __ \\/ __ `__ \\\n     / (__  )_____/ /_/ / /_/ (__  )/ /__/ /_/ / / / / / /\n  __/ /____/      \\__,_/\\____/____(_)___/\\____/_/ /_/ /_/\n /___/\n".replace(/\n/g,"\r\n");n.defaultConfig="[sdl]\nautolock=false\n\nfullscreen=false\nfulldouble=false\nfullresolution=original\nwindowresolution=original\noutput=surface\nsensitivity=100\nwaitonerror=true\npriority=higher,normal\nmapperfile=mapper-jsdos.map\nusescancodes=true\nvsync=false\n[dosbox]\nmachine=svga_s3\n\nlanguage=\ncaptures=capture\nmemsize=16\n[cpu]\ncore=auto\ncputype=auto\ncycles=auto\n\ncycleup=10\ncycledown=20\n[mixer]\nnosound=false\nrate=44100\n\nblocksize=1024\nprebuffer=20\n\n[render]\n# frameskip: How many frames DOSBox skips before drawing one.\n#    aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!.\n#    scaler: Scaler used to enlarge/enhance low resolution modes.\n#              If 'forced' is appended, then the scaler will be used even if the result might not be desired.\n#            Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x.\n\nframeskip=0\naspect=false\nscaler=none\n\n[midi]\n#     mpu401: Type of MPU-401 to emulate.\n#             Possible values: intelligent, uart, none.\n# mididevice: Device that will receive the MIDI data from MPU-401.\n#             Possible values: default, win32, alsa, oss, coreaudio, coremidi, none.\n# midiconfig: Special configuration options for the device driver. This is usually the id of the device you want to use.\n#               See the README/Manual for more details.\n\nmpu401=intelligent\nmididevice=default\nmidiconfig=\n\n[sblaster]\n#  sbtype: Type of Soundblaster to emulate. gb is Gameblaster.\n#          Possible values: sb1, sb2, sbpro1, sbpro2, sb16, gb, none.\n#  sbbase: The IO address of the soundblaster.\n#          Possible values: 220, 240, 260, 280, 2a0, 2c0, 2e0, 300.\n#     irq: The IRQ number of the soundblaster.\n#          Possible values: 7, 5, 3, 9, 10, 11, 12.\n#     dma: The DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n#    hdma: The High DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n# sbmixer: Allow the soundblaster mixer to modify the DOSBox mixer.\n# oplmode: Type of OPL emulation. On 'auto' the mode is determined by sblaster type. All OPL modes are Adlib-compatible, except for 'cms'.\n#          Possible values: auto, cms, opl2, dualopl2, opl3, none.\n#  oplemu: Provider for the OPL emulation. compat might provide better quality (see oplrate as well).\n#          Possible values: default, compat, fast.\n# oplrate: Sample rate of OPL music emulation. Use 49716 for highest quality (set the mixer rate accordingly).\n#          Possible values: 44100, 49716, 48000, 32000, 22050, 16000, 11025, 8000.\n\nsbtype=sb16\nsbbase=220\nirq=7\ndma=1\nhdma=5\nsbmixer=true\noplmode=auto\noplemu=default\noplrate=44100\n\n[gus]\n#      gus: Enable the Gravis Ultrasound emulation.\n#  gusrate: Sample rate of Ultrasound emulation.\n#           Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#  gusbase: The IO base address of the Gravis Ultrasound.\n#           Possible values: 240, 220, 260, 280, 2a0, 2c0, 2e0, 300.\n#   gusirq: The IRQ number of the Gravis Ultrasound.\n#           Possible values: 5, 3, 7, 9, 10, 11, 12.\n#   gusdma: The DMA channel of the Gravis Ultrasound.\n#           Possible values: 3, 0, 1, 5, 6, 7.\n# ultradir: Path to Ultrasound directory. In this directory\n#           there should be a MIDI directory that contains\n#           the patch files for GUS playback. Patch sets used\n#           with Timidity should work fine.\n\ngus=false\ngusrate=44100\ngusbase=240\ngusirq=5\ngusdma=3\nultradir=C:\\ULTRASND\n\n[speaker]\n# pcspeaker: Enable PC-Speaker emulation.\n#    pcrate: Sample rate of the PC-Speaker sound generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#     tandy: Enable Tandy Sound System emulation. For 'auto', emulation is present only if machine is set to 'tandy'.\n#            Possible values: auto, on, off.\n# tandyrate: Sample rate of the Tandy 3-Voice generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#    disney: Enable Disney Sound Source emulation. (Covox Voice Master and Speech Thing compatible).\n\npcspeaker=true\npcrate=44100\ntandy=auto\ntandyrate=44100\ndisney=true\n\n[joystick]\n# joysticktype: Type of joystick to emulate: auto (default), none,\n#               2axis (supports two joysticks),\n#               4axis (supports one joystick, first joystick used),\n#               4axis_2 (supports one joystick, second joystick used),\n#               fcs (Thrustmaster), ch (CH Flightstick).\n#               none disables joystick emulation.\n#               auto chooses emulation depending on real joystick(s).\n#               (Remember to reset dosbox's mapperfile if you saved it earlier)\n#               Possible values: auto, 2axis, 4axis, 4axis_2, fcs, ch, none.\n#        timed: enable timed intervals for axis. Experiment with this option, if your joystick drifts (away).\n#     autofire: continuously fires as long as you keep the button pressed.\n#       swap34: swap the 3rd and the 4th axis. can be useful for certain joysticks.\n#   buttonwrap: enable button wrapping at the number of emulated buttons.\n\njoysticktype=auto\ntimed=true\nautofire=false\nswap34=false\nbuttonwrap=false\n\n[serial]\n# serial1: set type of device connected to com port.\n#          Can be disabled, dummy, modem, nullmodem, directserial.\n#          Additional parameters must be in the same line in the form of\n#          parameter:value. Parameter for all types is irq (optional).\n#          for directserial: realport (required), rxdelay (optional).\n#                           (realport:COM1 realport:ttyS0).\n#          for modem: listenport (optional).\n#          for nullmodem: server, rxdelay, txdelay, telnet, usedtr,\n#                         transparent, port, inhsocket (all optional).\n#          Example: serial1=modem listenport:5000\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial2: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial3: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial4: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n\nserial1=dummy\nserial2=dummy\nserial3=disabled\nserial4=disabled\n\n[dos]\n#            xms: Enable XMS support.\n#            ems: Enable EMS support.\n#            umb: Enable UMB support.\n# keyboardlayout: Language code of the keyboard layout (or none).\n\nxms=true\nems=true\numb=true\nkeyboardlayout=auto\n\n[ipx]\n# ipx: Enable ipx over UDP/IP emulation.\n\nipx=true\n[autoexec]\necho off\nmount c .\nc:\n\ntype jsdos~1/readme.txt\necho on\n\n# Generated using https://js-dos.com\n#     \n#          \n#         \n#     \n#    \n#       \n#      \n#     \n#     \n#       \n#    \n#     \n#           \n".replace(/\n/g,"\r\n")},{"../../build":45,"../../http":50,"../../libzip/libzip":55}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dosDirect=void 0;const o=e("../../../protocol/messages-queue");n.dosDirect=async function(e,t){const n=new o.MessagesQueue;let s=n.handler.bind(n);const r={postMessage:(e,t)=>{s(e,t)}},i=e=>{const n=e.data;"ws-sync-sleep"===n?.name&&n.props.sessionId===t&&postMessage({name:"wc-sync-sleep",props:n.props},"*")},a={sessionId:t,sendMessageToServer:(e,t)=>{r.messageHandler({data:{name:e,props:t}})},initMessageHandler:e=>{s=e,n.sendTo(s)},exit:()=>{"undefined"!=typeof window&&window.removeEventListener("message",i)}};return a.module=r,"undefined"!=typeof window&&window.addEventListener("message",i,{passive:!0}),await e.instantiate(r),r.callMain([t]),a}},{"../../../protocol/messages-queue":56}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dosWorker=void 0;const o=e("../../../protocol/messages-queue");n.dosWorker=async function(e,t,n){const s=new o.MessagesQueue;let r=s.handler.bind(s);const i=await fetch(e);if(200!==i.status)throw new Error("Unable to download '"+e+"' ("+i.status+"): "+i.statusText);const a=URL.createObjectURL(await i.blob()),c=new Worker(a);c.onerror=e=>{r("ws-err",{type:e.type,filename:e.filename,message:e.message})},c.onmessage=e=>{const t=e.data;void 0!==t?.name&&r(t.name,t.props)},await t.instantiate({});const u={sessionId:n,sendMessageToServer:(e,t,n)=>{n?c.postMessage({name:e,props:t},n):c.postMessage({name:e,props:t})},initMessageHandler:e=>{r=e,s.sendTo(r)},exit:()=>{URL.revokeObjectURL(a),c.terminate()}};try{u.sendMessageToServer("wc-install",{module:t.wasmModule,sessionId:n})}catch(e){u.sendMessageToServer("wc-install",{sessionId:n})}return u}},{"../../../protocol/messages-queue":56}],49:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkType=void 0;const o=e("./impl/emulators-impl");var s;(s=n.NetworkType||(n.NetworkType={}))[s.NETWORK_DOSBOX_IPX=0]="NETWORK_DOSBOX_IPX","undefined"!=typeof window&&(window.emulators=o.default),void 0!==t&&(t.emulators=o.default)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./impl/emulators-impl":52}],50:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.httpRequest=void 0,n.httpRequest=function(e,t){return new Promise(((n,o)=>{new s(e,{...t,success:n,fail:e=>{o(new Error(e))}})}))};class s{constructor(e,t){if(o(this,"resource",void 0),o(this,"options",void 0),o(this,"xhr",null),o(this,"total",0),o(this,"loaded",0),this.resource=e,this.options=t,this.options.method=t.method||"GET","GET"!==this.options.method)throw new Error("Method "+this.options.method+" is not supported");this.makeHttpRequest()}makeHttpRequest(){let e,t;this.xhr=new XMLHttpRequest,this.xhr.open(this.options.method||"GET",this.resource,!0),"POST"===this.options.method&&this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.overrideMimeType("text/plain; charset=x-user-defined"),"function"==typeof(e=this.xhr).addEventListener&&e.addEventListener("progress",(e=>{if(this.total=e.total,this.loaded=e.loaded,this.options.progress)return this.options.progress(e.total,e.loaded)})),"function"==typeof(t=this.xhr).addEventListener&&t.addEventListener("error",(()=>{if(this.options.fail)return this.options.fail("Unalbe to download '"+this.resource+"', code: "+this.xhr.status),delete this.options.fail})),this.xhr.onreadystatechange=()=>this.onReadyStateChange(),this.options.responseType&&(this.xhr.responseType=this.options.responseType),this.xhr.send(this.options.data)}onReadyStateChange(){const e=this.xhr;if(4===e.readyState)if(200===e.status){if(this.options.success){const t=Math.max(this.total,this.loaded);return void 0!==this.options.progress&&this.options.progress(t,t),this.options.success(e.response)}}else if(this.options.fail)return this.options.fail("Unable to download '"+this.resource+"', code: "+e.status),delete this.options.fail}}},{}],51:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.CommandInterfaceEventsImpl=void 0,n.CommandInterfaceEventsImpl=class{constructor(){var e=this;o(this,"onStdoutConsumers",[]),o(this,"delayedStdout",[]),o(this,"onFrameSizeConsumers",[]),o(this,"onFrameConsumers",[]),o(this,"onSoundPushConsumers",[]),o(this,"onExitConsumers",[]),o(this,"onMessageConsumers",[]),o(this,"delayedMessages",[]),o(this,"onNetworkConnectedConsumers",[]),o(this,"onNetworkDisconnectedConsumers",[]),o(this,"onStdout",(e=>{if(this.onStdoutConsumers.push(e),1===this.onStdoutConsumers.length){for(const e of this.delayedStdout)this.fireStdout(e);this.delayedStdout=[]}})),o(this,"onFrameSize",(e=>{this.onFrameSizeConsumers.push(e)})),o(this,"onFrame",(e=>{this.onFrameConsumers.push(e)})),o(this,"onSoundPush",(e=>{this.onSoundPushConsumers.push(e)})),o(this,"onExit",(e=>{this.onExitConsumers.push(e)})),o(this,"onMessage",(e=>{if(this.onMessageConsumers.push(e),1===this.onMessageConsumers.length){for(const t of this.delayedMessages)e(t.msgType,...t.args);this.delayedMessages=[]}})),o(this,"fireStdout",(e=>{if(0!==this.onStdoutConsumers.length)for(const t of this.onStdoutConsumers)t(e);else this.delayedStdout.push(e)})),o(this,"fireFrameSize",((e,t)=>{for(const n of this.onFrameSizeConsumers)n(e,t)})),o(this,"fireFrame",((e,t)=>{for(const n of this.onFrameConsumers)n(e,t)})),o(this,"fireSoundPush",(e=>{for(const t of this.onSoundPushConsumers)t(e)})),o(this,"fireExit",(()=>{for(const e of this.onExitConsumers)e();this.onStdoutConsumers=[],this.onFrameSizeConsumers=[],this.onFrameConsumers=[],this.onSoundPushConsumers=[],this.onExitConsumers=[],this.onMessageConsumers=[]})),o(this,"fireMessage",(function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];if(0!==e.onMessageConsumers.length)for(const n of e.onMessageConsumers)n(t,...o);else e.delayedMessages.push({msgType:t,args:o})})),o(this,"fireNetworkConnected",((e,t)=>{for(const n of this.onNetworkConnectedConsumers)n(e,t)})),o(this,"fireNetworkDisconnected",(e=>{for(const t of this.onNetworkDisconnectedConsumers)t(e)}))}onNetworkConnected(e){this.onNetworkConnectedConsumers.push(e)}onNetworkDisconnected(e){this.onNetworkDisconnectedConsumers.push(e)}}},{}],52:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});const s=e("../build"),r=e("./modules"),i=e("../dos/bundle/dos-bundle"),a=e("../dos/dosbox/ts/direct"),c=e("../dos/dosbox/ts/worker"),u=e("../protocol/protocol"),l=e("../libzip/libzip"),d=new class{constructor(){o(this,"pathPrefix",""),o(this,"version",s.Build.version),o(this,"wdosboxJs","wdosbox.js"),o(this,"wdosboxxJs","wdosbox-x.js"),o(this,"wasmModulesPromise",void 0)}async bundle(){const e=await this.wasmModules(),t=await e.libzip();return new i.default(t)}async bundleConfig(e){const t=await this.wasmModules(),n=await t.libzip(),o={};await n.instantiate(o);const r=new l.default(o);try{r.zipToFs(e,"/",".jsdos/");try{const e=await r.readFile(".jsdos/dosbox.conf");try{const t=await r.readFile(".jsdos/jsdos.json");return{dosboxConf:e,jsdosConf:JSON.parse(t)}}catch(e){}return{dosboxConf:e,jsdosConf:{version:s.Build.version}}}catch(e){}return null}finally{r.destroy()}}async bundleUpdateConfig(e,t){const n=await this.wasmModules(),o=await n.libzip(),s={};await o.instantiate(s);const r=new l.default(s);try{return await r.writeFile("bundle.zip",e),await r.writeFile(".jsdos/dosbox.conf",t.dosboxConf),await r.writeFile(".jsdos/jsdos.json",JSON.stringify(t.jsdosConf)),await r.zipAddFile("bundle.zip",".jsdos/jsdos.json"),await r.zipAddFile("bundle.zip",".jsdos/dosbox.conf"),await r.readFile("bundle.zip","binary")}finally{r.destroy()}}async dosboxNode(e,t){return this.dosboxDirect(e,t)}async dosboxDirect(e,t){const n=await this.wasmModules(),o=await n.dosbox(),s=await(0,a.dosDirect)(o,"session-"+Date.now());return this.backend(e,s,t)}async dosboxWorker(e,t){const n=await this.wasmModules(),o=await n.dosbox(),s=await(0,c.dosWorker)(this.pathPrefix+this.wdosboxJs,o,"session-"+Date.now());return this.backend(e,s,t)}async dosboxXNode(e,t){return this.dosboxXDirect(e,t)}async dosboxXDirect(e,t){const n=await this.wasmModules(),o=await n.dosboxx(),s=await(0,a.dosDirect)(o,"session-"+Date.now());return this.backend(e,s,t)}async dosboxXWorker(e,t){const n=await this.wasmModules(),o=await n.dosboxx(),s=await(0,c.dosWorker)(this.pathPrefix+this.wdosboxxJs,o,"session-"+Date.now());return this.backend(e,s,t)}async backend(e,t,n){return new Promise(((o,s)=>{const r=new u.CommandInterfaceOverTransportLayer(Array.isArray(e)?e:[e],t,(e=>{null!==e?s(e):setTimeout((()=>o(r)),4)}),n||{})}))}wasmModules(){return void 0!==this.wasmModulesPromise||(this.wasmModulesPromise=(async()=>new r.WasmModulesImpl(this.pathPrefix,this.wdosboxJs,this.wdosboxxJs))()),this.wasmModulesPromise}async dosDirect(e){return this.dosboxDirect(e)}async dosWorker(e){return this.dosboxWorker(e)}};n.default=d},{"../build":45,"../dos/bundle/dos-bundle":46,"../dos/dosbox/ts/direct":47,"../dos/dosbox/ts/worker":48,"../libzip/libzip":55,"../protocol/protocol":57,"./modules":53}],53:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.loadWasmModule=n.WasmModulesImpl=n.host=void 0;const s=e("../http");function r(t,o,r){return"undefined"==typeof XMLHttpRequest?function(t,o){if(void 0!==n.host.globals.compiled[o])return n.host.globals.compiled[o];const s=e(t),r=Promise.resolve(new i(s));return o&&(n.host.globals.compiled[o]=r),r}(t,o):function(e,t,o){if(void 0!==n.host.globals.compiled[t])return n.host.globals.compiled[t];const r=async function(){const r=e.lastIndexOf("/"),i=e.indexOf("w",r),c=i===r+1&&i>=0;if(!n.host.wasmSupported||!c)throw new Error("Starting from js-dos 6.22.60 js environment is not supported");const u=e.substr(0,e.lastIndexOf(".js"))+".wasm",l=(0,s.httpRequest)(u,{responseType:"arraybuffer",progress:(t,n)=>{o("Resolving DosBox ("+e+")",t,n)}}),d=(0,s.httpRequest)(e,{progress:(e,t)=>{o("Resolving DosBox",e,t)}}),[h,f]=await Promise.all([l,d]),p=await WebAssembly.compile(h);return eval.call(window,f),n.host.globals.exports[t]=n.host.globals.module.exports,new a(p,n.host.globals.exports[t],((e,t)=>{e.env=e.env||{},WebAssembly.instantiate(p,e).then((e=>t(e,p)))}))}();return t&&(n.host.globals.compiled[t]=r),r}(t,o,r)}n.host=new class{constructor(){if(o(this,"wasmSupported",!1),o(this,"globals",void 0),this.globals="undefined"==typeof window?{}:window,this.globals.module||(this.globals.module={}),this.globals.exports||(this.globals.exports={}),this.globals.compiled||(this.globals.compiled={}),"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate&&"function"==typeof WebAssembly.compile){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));e instanceof WebAssembly.Module&&(this.wasmSupported=new WebAssembly.Instance(e)instanceof WebAssembly.Instance)}Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){const n=65535&e,o=65535&t;return n*o+((e>>>16)*o+n*(t>>>16)<<16)|0}),Math.imul=Math.imul,Math.fround||(Math.fround=function(e){return e}),Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e>>>=0;for(let t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc}},n.WasmModulesImpl=class{constructor(e,t,n){o(this,"pathPrefix",void 0),o(this,"wdosboxJs",void 0),o(this,"wdosboxxJs",void 0),o(this,"libzipPromise",void 0),o(this,"dosboxPromise",void 0),o(this,"dosboxxPromise",void 0),o(this,"wasmSupported",!1),e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.pathPrefix=e,this.wdosboxJs=t,this.wdosboxxJs=n}libzip(){return void 0!==this.libzipPromise||(this.libzipPromise=this.loadModule(this.pathPrefix+"wlibzip.js","WLIBZIP")),this.libzipPromise}dosbox(){return void 0!==this.dosboxPromise||(this.dosboxPromise=this.loadModule(this.pathPrefix+this.wdosboxJs,"WDOSBOX")),this.dosboxPromise}dosboxx(){return void 0!==this.dosboxxPromise||(this.dosboxxPromise=this.loadModule(this.pathPrefix+this.wdosboxxJs,"WDOSBOXX")),this.dosboxxPromise}loadModule(e,t){return r(e,t,(()=>{}))}},n.loadWasmModule=r;class i{constructor(e){o(this,"emModule",void 0),this.emModule=e}instantiate(e){return new Promise((t=>{e.onRuntimeInitialized=()=>{t()},new this.emModule(e)}))}}class a{constructor(e,t,n){o(this,"wasmModule",void 0),o(this,"module",void 0),o(this,"instantiateWasm",void 0),this.wasmModule=e,this.module=t,this.instantiateWasm=n}instantiate(e){return new Promise((t=>{e.instantiateWasm=this.instantiateWasm,e.onRuntimeInitialized=()=>{t()},new this.module(e)}))}}},{"../http":50}],54:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.Keys=void 0,n.Keys=new class{constructor(){o(this,"KBD_NONE",0),o(this,"KBD_0",48),o(this,"KBD_1",49),o(this,"KBD_2",50),o(this,"KBD_3",51),o(this,"KBD_4",52),o(this,"KBD_5",53),o(this,"KBD_6",54),o(this,"KBD_7",55),o(this,"KBD_8",56),o(this,"KBD_9",57),o(this,"KBD_a",65),o(this,"KBD_b",66),o(this,"KBD_c",67),o(this,"KBD_d",68),o(this,"KBD_e",69),o(this,"KBD_f",70),o(this,"KBD_g",71),o(this,"KBD_h",72),o(this,"KBD_i",73),o(this,"KBD_j",74),o(this,"KBD_k",75),o(this,"KBD_l",76),o(this,"KBD_m",77),o(this,"KBD_n",78),o(this,"KBD_o",79),o(this,"KBD_p",80),o(this,"KBD_q",81),o(this,"KBD_r",82),o(this,"KBD_s",83),o(this,"KBD_t",84),o(this,"KBD_u",85),o(this,"KBD_v",86),o(this,"KBD_w",87),o(this,"KBD_x",88),o(this,"KBD_y",89),o(this,"KBD_z",90),o(this,"KBD_f1",290),o(this,"KBD_f2",291),o(this,"KBD_f3",292),o(this,"KBD_f4",293),o(this,"KBD_f5",294),o(this,"KBD_f6",295),o(this,"KBD_f7",296),o(this,"KBD_f8",297),o(this,"KBD_f9",298),o(this,"KBD_f10",299),o(this,"KBD_f11",300),o(this,"KBD_f12",301),o(this,"KBD_kp0",320),o(this,"KBD_kp1",321),o(this,"KBD_kp2",322),o(this,"KBD_kp3",323),o(this,"KBD_kp4",324),o(this,"KBD_kp5",325),o(this,"KBD_kp6",326),o(this,"KBD_kp7",327),o(this,"KBD_kp8",328),o(this,"KBD_kp9",329),o(this,"KBD_kpperiod",330),o(this,"KBD_kpdivide",331),o(this,"KBD_kpmultiply",332),o(this,"KBD_kpminus",333),o(this,"KBD_kpplus",334),o(this,"KBD_kpenter",335),o(this,"KBD_esc",256),o(this,"KBD_tab",258),o(this,"KBD_backspace",259),o(this,"KBD_enter",257),o(this,"KBD_space",32),o(this,"KBD_leftalt",342),o(this,"KBD_rightalt",346),o(this,"KBD_leftctrl",341),o(this,"KBD_rightctrl",345),o(this,"KBD_leftshift",340),o(this,"KBD_rightshift",344),o(this,"KBD_capslock",280),o(this,"KBD_scrolllock",281),o(this,"KBD_numlock",282),o(this,"KBD_grave",96),o(this,"KBD_minus",45),o(this,"KBD_equals",61),o(this,"KBD_backslash",92),o(this,"KBD_leftbracket",91),o(this,"KBD_rightbracket",93),o(this,"KBD_semicolon",59),o(this,"KBD_quote",39),o(this,"KBD_period",46),o(this,"KBD_comma",44),o(this,"KBD_slash",47),o(this,"KBD_printscreen",283),o(this,"KBD_pause",284),o(this,"KBD_insert",260),o(this,"KBD_home",268),o(this,"KBD_pageup",266),o(this,"KBD_delete",261),o(this,"KBD_end",269),o(this,"KBD_pagedown",267),o(this,"KBD_left",263),o(this,"KBD_up",265),o(this,"KBD_down",264),o(this,"KBD_right",262),o(this,"KBD_extra_lt_gt",348)}}},{}],55:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/home/web_user";o(this,"module",void 0),o(this,"home",void 0),this.module=e,this.home=t,this.module.callMain([]),this.module.FS.ignorePermissions=!0,this.chdirToHome()}zipFromFs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.chdirToHome();const t=this.module._zip_from_fs(e);if(0===t)return Promise.reject(new Error("Can't create zip, see more info in logs"));const n=this.module.HEAPU32[t/4],o=this.module.HEAPU8.slice(t+4,t+4+n);return this.module._free(t),Promise.resolve(o)}zipToFs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2?arguments[2]:void 0;const o=this.module;t=this.normalizeFilename(t);const s=this.normalizeFilename(t).split("/");this.createPath(s,0,s.length),this.chdir(t);const r=void 0!==n&&n.length>0;let i=0;if(r){const e=o.lengthBytesUTF8(n)+1;i=o._malloc(e),o.stringToUTF8(n,i,e)}const a=new Uint8Array(e),c=o._malloc(a.length);o.HEAPU8.set(a,c);const u=o._zip_to_fs(c,a.length,i);return o._free(c),this.chdirToHome(),r&&o._free(i),0===u?Promise.resolve():Promise.reject(new Error("Can't extract zip, retcode "+u+", see more info in logs"))}writeFile(e,t){e=this.normalizeFilename(e),t instanceof ArrayBuffer&&(t=new Uint8Array(t));const n=e.split("/");if(0===n.length)throw new Error("Can't create file '"+e+"', because it's not valid file path");const o=n[n.length-1].trim();if(0===o.length)throw new Error("Can't create file '"+e+"', because file name is empty");const s=this.createPath(n,0,n.length-1);this.module.FS.writeFile(s+"/"+o,t)}async readFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return e=this.normalizeFilename(e),this.module.FS.readFile(e,{encoding:t})}exists(e){e=this.normalizeFilename(e);try{return this.module.FS.lookupPath(e),!0}catch(e){return!1}}destroy(){try{this.module._libzip_destroy()}catch(e){return e}}normalizeFilename(e){for(e=e.replace(new RegExp("^[a-zA-z]+:"),"").replace(new RegExp("\\\\","g"),"/");"/"===e[0];)e=e.substr(1);return e}createPath(e,t,n){let o=".";for(let s=t;s<n;++s){const t=e[s].trim();0!==t.length&&(this.module.FS.createPath(o,t,!0,!0),o=o+"/"+t)}return o}chdirToHome(){this.module.FS.chdir(this.home)}chdir(e){this.module.FS.chdir(this.home+"/"+e)}async zipAddFile(e,t){const n=this.module,o=n.lengthBytesUTF8(e)+1,s=n._malloc(o);n.stringToUTF8(e,s,o);const r=n.lengthBytesUTF8(t)+1,i=n._malloc(r);n.stringToUTF8(t,i,r);const a=this.module._zipfile_add(s,i,i);if(n._free(s),n._free(i),0!==a)throw new Error("Unable to add "+t+" into "+e)}}},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MessagesQueue=void 0,n.MessagesQueue=class{constructor(){var e,t,n;e=this,n=[],(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="messages"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}handler(e,t){this.messages.push({name:e,props:t})}sendTo(e){for(const t of this.messages)e(t.name,t.props);this.messages=[]}}},{}],57:[function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.CommandInterfaceOverTransportLayer=void 0;const s=e("../impl/ci-impl"),r=4194304;n.CommandInterfaceOverTransportLayer=class{constructor(e,t,n,r){o(this,"startedAt",Date.now()),o(this,"exited",!1),o(this,"frameWidth",0),o(this,"frameHeight",0),o(this,"rgb",null),o(this,"rgba",null),o(this,"freq",0),o(this,"utf8Decoder",new TextDecoder),o(this,"init",void 0),o(this,"transport",void 0),o(this,"ready",void 0),o(this,"persistPromise",void 0),o(this,"persistResolve",void 0),o(this,"exitPromise",void 0),o(this,"exitResolve",void 0),o(this,"eventsImpl",new s.CommandInterfaceEventsImpl),o(this,"keyMatrix",{}),o(this,"configPromise",void 0),o(this,"configResolve",(()=>{})),o(this,"panicMessages",[]),o(this,"connectPromise",null),o(this,"connectResolve",(()=>{})),o(this,"connectReject",(()=>{})),o(this,"disconnectPromise",null),o(this,"disconnectResolve",(()=>{})),o(this,"asyncifyStatsPromise",null),o(this,"asyncifyStatsResolve",(()=>{})),o(this,"fsTreePromise",null),o(this,"fsTreeResolve",(()=>{})),o(this,"fsGetFilePromise",{}),o(this,"fsGetFileResolve",{}),o(this,"fsGetFileParts",{}),o(this,"dataChunkPromise",{}),o(this,"dataChunkResolve",{}),o(this,"networkId",0),o(this,"network",{}),o(this,"options",void 0),this.options=r,this.init=e,this.transport=t,this.ready=n,this.configPromise=new Promise((e=>this.configResolve=e)),this.transport.initMessageHandler(this.onServerMessage.bind(this))}sendClientMessage(e,t,n){(t=t||{}).sessionId=t.sessionId||this.transport.sessionId,this.transport.sendMessageToServer(e,t,n)}onServerMessage(e,t){if(!(void 0===e||e.length<3||"w"!==e[0]||"s"!==e[1]||"-"!==e[2])&&void 0!==t&&t.sessionId===this.transport.sessionId)switch(e){case"ws-ready":{const e=async()=>{if(!this.init||0===this.init.length)return;const e=new TextEncoder,t=async(e,t,n)=>{await this.sendDataChunk({type:e,name:t,data:n.buffer}),await this.sendDataChunk({type:e,name:t,data:null})};let n=0;for(const o of this.init)if(ArrayBuffer.isView(o))await t("bundle",n+"",o),n++;else if("string"==typeof o)await t("file",".jsdos/dosbox.conf",e.encode(o));else{const n=o,s=o;void 0!==s.jsdosConf?.version?(await t("file",".jsdos/dosbox.conf",e.encode(s.dosboxConf)),await t("file",".jsdos/jsdos.json",e.encode(JSON.stringify(s.jsdosConf,null,2)))):void 0!==n.path?await t("file",n.path,n.contents):console.error("Unknown init part",o)}};e().then((()=>{this.sendClientMessage("wc-run",{token:this.options.token})})).catch((e=>{this.onErr("panic","Can't send bundles to backend: "+e.message),console.error(e)})).finally((()=>{delete this.init}))}break;case"ws-server-ready":this.panicMessages.length>0?(void 0!==this.transport.exit&&this.transport.exit(),this.ready(new Error(JSON.stringify(this.panicMessages)))):this.ready(null),delete this.ready;break;case"ws-frame-set-size":this.onFrameSize(t.width,t.height);break;case"ws-update-lines":this.onFrameLines(t.lines,t.rgba);break;case"ws-exit":this.onExit();break;case"ws-log":this.onLog(t.tag,t.message);break;case"ws-warn":this.onWarn(t.tag,t.message);break;case"ws-err":this.onErr(t.tag,t.message);break;case"ws-stdout":this.onStdout(t.message);break;case"ws-persist":this.onPersist(t.bundle);break;case"ws-sound-init":this.onSoundInit(t.freq);break;case"ws-sound-push":this.onSoundPush(t.samples);break;case"ws-config":this.onConfig({dosboxConf:this.utf8Decoder.decode(t.dosboxConf),jsdosConf:JSON.parse(t.jsdosConf)});break;case"ws-sync-sleep":this.sendClientMessage("wc-sync-sleep",t);break;case"ws-connected":this.connectResolve(),this.connectPromise=null,this.connectResolve=()=>{},this.connectReject=()=>{},this.eventsImpl.fireNetworkConnected(t.networkType,t.address);break;case"ws-disconnected":null!==this.connectPromise?(this.connectReject(),this.connectPromise=null,this.connectResolve=()=>{},this.connectReject=()=>{}):(this.disconnectResolve(),this.disconnectPromise=null,this.disconnectResolve=()=>{}),this.eventsImpl.fireNetworkDisconnected(t.networkType);break;case"ws-extract-progress":this.options.onExtractProgress&&this.options.onExtractProgress(t.index,t.file,t.extracted,t.count);break;case"ws-asyncify-stats":this.asyncifyStatsResolve(t),this.asyncifyStatsResolve=()=>{},this.asyncifyStatsPromise=null;break;case"ws-fs-tree":this.fsTreeResolve(t.fsTree),this.fsTreeResolve=()=>{},this.fsTreePromise=null;break;case"ws-send-data-chunk":{const e=t.chunk,n=this.dataChunkKey(e);if("ok"===e.type)void 0!==this.dataChunkPromise[n]&&(this.dataChunkResolve[n](),delete this.dataChunkPromise[n],delete this.dataChunkResolve[n]);else if("file"===e.type)if(null===e.data){const t=this.mergeChunks(this.fsGetFileParts[e.name]);this.fsGetFileResolve[e.name](t),delete this.fsGetFilePromise[e.name],delete this.fsGetFileResolve[e.name]}else this.fsGetFileParts[e.name].push(new Uint8Array(e.data));else console.log("Unknown chunk type:",e.type)}break;case"ws-net-connect":{this.networkId+=1;const e=this.networkId,n=new WebSocket(t.address);n.binaryType="arraybuffer",n.addEventListener("error",(e=>{console.error("Can't connect to",t.address),this.sendClientMessage("wc-net-connected",{networkId:-1})})),n.addEventListener("open",(()=>{this.network[e]=n,this.sendClientMessage("wc-net-connected",{networkId:e})})),n.addEventListener("message",(t=>{this.sendClientMessage("wc-net-received",{networkId:e,data:t.data},[t.data])}))}break;case"ws-net-send":{const e=this.network[t.networkId];e&&e.send(t.data)}break;case"ws-net-disconnect":{const e=this.network[t.networkId];delete this.network[t.networkId],e&&e.close()}break;default:console.log("Unknown server message (ws):",e)}}onConfig(e){this.configResolve(e)}onFrameSize(e,t){this.frameWidth===e&&this.frameHeight===t||(this.frameWidth=e,this.frameHeight=t,this.rgb=new Uint8Array(e*t*3),this.eventsImpl.fireFrameSize(e,t))}onFrameLines(e,t){for(const t of e)this.rgb.set(t.heapu8,t.start*this.frameWidth*3);this.eventsImpl.fireFrame(this.rgb,this.rgba)}onSoundInit(e){this.freq=e}onSoundPush(e){this.eventsImpl.fireSoundPush(e)}onLog(e,t){this.eventsImpl.fireMessage("log","["+e+"]"+t)}onWarn(e,t){this.eventsImpl.fireMessage("warn","["+e+"]"+t)}onErr(e,t){"panic"===e&&(this.panicMessages.push(t),console.error("["+e+"]"+t)),this.eventsImpl.fireMessage("error","["+e+"]"+t)}onStdout(e){this.eventsImpl.fireStdout(e)}config(){return this.configPromise}width(){return this.frameWidth}height(){return this.frameHeight}soundFrequency(){return this.freq}screenshot(){if(null!==this.rgb||null!==this.rgba){const e=new Uint8ClampedArray(this.frameWidth*this.frameHeight*4),t=null!==this.rgb?this.rgb:this.rgba;let n=0,o=0;for(;o<e.length;)e[o++]=t[n++],e[o++]=t[n++],e[o++]=t[n++],e[o++]=255,t.length===e.length&&n++;return Promise.resolve(new ImageData(e,this.frameWidth,this.frameHeight))}return Promise.reject(new Error("No frame received"))}simulateKeyPress(){const e=Date.now()-this.startedAt;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];n.forEach((t=>this.addKey(t,!0,e))),n.forEach((t=>this.addKey(t,!1,e+16)))}sendKeyEvent(e,t){this.addKey(e,t,Date.now()-this.startedAt)}addKey(e,t,n){!0===this.keyMatrix[e]!==t&&(this.keyMatrix[e]=t,this.sendClientMessage("wc-add-key",{key:e,pressed:t,timeMs:n}))}sendMouseMotion(e,t){this.sendClientMessage("wc-mouse-move",{x:e,y:t,relative:!1,timeMs:Date.now()-this.startedAt})}sendMouseRelativeMotion(e,t){this.sendClientMessage("wc-mouse-move",{x:e,y:t,relative:!0,timeMs:Date.now()-this.startedAt})}sendMouseButton(e,t){this.sendClientMessage("wc-mouse-button",{button:e,pressed:t,timeMs:Date.now()-this.startedAt})}sendMouseSync(){this.sendClientMessage("wc-mouse-sync",{timeMs:Date.now()-this.startedAt})}sendBackendEvent(e){this.sendClientMessage("wc-backend-event",{json:JSON.stringify(e)})}persist(e){if(void 0!==this.persistPromise)return this.persistPromise;const t=new Promise((e=>{this.persistResolve=e}));return this.persistPromise=t,this.sendClientMessage("wc-pack-fs-to-bundle",{onlyChanges:!1!==e}),t}onPersist(e){this.persistResolve&&(this.persistResolve(e),delete this.persistPromise,delete this.persistResolve)}pause(){this.sendClientMessage("wc-pause")}resume(){this.sendClientMessage("wc-resume")}mute(){this.sendClientMessage("wc-mute")}unmute(){this.sendClientMessage("wc-unmute")}exit(){if(this.exited)return Promise.resolve();if(void 0!==this.exitPromise)return this.exitPromise;this.exitPromise=new Promise((e=>this.exitResolve=e)),this.exitPromise.then((()=>{this.events().fireExit()})),this.resume();for(const e of Object.values(this.network))e.close();return this.network={},this.sendClientMessage("wc-exit"),this.exitPromise}onExit(){this.exited||(this.exited=!0,void 0!==this.transport.exit&&this.transport.exit(),this.exitResolve&&(this.exitResolve(),delete this.exitPromise,delete this.exitResolve))}events(){return this.eventsImpl}networkConnect(e,t){return null!==this.connectPromise||null!==this.disconnectPromise?Promise.reject(new Error("Already prefoming connection or disconnection...")):(this.connectPromise=new Promise(((n,o)=>{t.startsWith("wss://")||t.startsWith("ws://")||(t=("http:"===window.location.protocol?"ws://":"wss://")+t),this.connectResolve=n,this.connectReject=o,this.sendClientMessage("wc-connect",{networkType:e,address:t})})),this.connectPromise)}networkDisconnect(e){return null!==this.connectPromise||null!==this.disconnectPromise?Promise.reject(new Error("Already prefoming connection or disconnection...")):(this.disconnectPromise=new Promise((t=>{this.disconnectResolve=t,this.sendClientMessage("wc-disconnect",{networkType:e})})),this.disconnectPromise)}asyncifyStats(){if(null!==this.asyncifyStatsPromise)return this.asyncifyStatsPromise;const e=new Promise((e=>{this.asyncifyStatsResolve=e}));return this.asyncifyStatsPromise=e,this.sendClientMessage("wc-asyncify-stats",{}),e}fsTree(){if(null!==this.fsTreePromise)return this.fsTreePromise;const e=new Promise((e=>{this.fsTreeResolve=e}));return this.fsTreePromise=e,this.sendClientMessage("wc-fs-tree"),e}async fsReadFile(e){if(void 0!==this.fsGetFilePromise[e])throw new Error("fsGetFile should not be called twice for same file");const t=new Promise((t=>{this.fsGetFileResolve[e]=t}));return this.fsGetFilePromise[e]=t,this.fsGetFileParts[e]=[],this.sendClientMessage("wc-fs-get-file",{file:e}),t}async fsWriteFile(e,t){if(ArrayBuffer.isView(t))await this.sendDataChunk({type:"file",name:e,data:t.buffer});else{const n=t.getReader();for(;;){const t=await n.read();if(void 0!==t.value&&await this.sendDataChunk({type:"file",name:e,data:t.value.buffer}),t.done)break}}await this.sendDataChunk({type:"file",name:e,data:null})}async fsDeleteFile(e){throw new Error("not implemented")}async sendDataChunk(e){if(null===e.data||e.data.byteLength<=r)return this.sendFullDataChunk(e);{let t=0;for(;t<e.data.byteLength;)await this.sendFullDataChunk({type:e.type,name:e.name,data:e.data.slice(t,Math.min(e.data.byteLength,t+r))}),t+=r}}async sendFullDataChunk(e){const t=this.dataChunkKey(e);if(void 0!==this.dataChunkPromise[t])throw new Error("sendDataChunk should be accepted before sending new one");const n=new Promise((e=>{this.dataChunkResolve[t]=e}));return this.dataChunkPromise[t]=n,this.sendClientMessage("wc-send-data-chunk",{chunk:e},null===e.data?void 0:[e.data]),n}dataChunkKey(e){return e.name}mergeChunks(e){if(1===e.length)return e[0];let t=0;for(const n of e)t+=n.byteLength;const n=new Uint8Array(t);t=0;for(const o of e)n.set(o,t),t+=o.byteLength;return n}}},{"../impl/ci-impl":51}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.renderComparsionOf=n.waitImage=void 0,n.waitImage=function(e,t,n){const s=n?.threshold??1,r=n?.timeout??3e3,i=void 0===n?.success?async()=>{}:n.success,a=n?.resize??!1;return new Promise(((n,c)=>{let u=setInterval((()=>{o(e,t,s,!1,a).then((e=>{null!==u&&null===e&&(clearInterval(u),u=null,i().then((()=>t.exit())).then(n).catch(c))})).catch((()=>{}))}),64);setTimeout((()=>{null!==u&&(clearInterval(u),o(e,t,s,!0,a).then((e=>{null===e?i().then((()=>t.exit())).then(n).catch(c):t.exit().then((()=>c(e))).catch(c)})).catch(c))}),r)}))};const o=(e,t,n,o,i)=>t.screenshot().then(s).then((t=>new Promise(((s,a)=>{const c=new Image;c.onload=()=>{const e=document.createElement("canvas");e.width=c.width,e.height=c.height;const a=e.getContext("2d");a.drawImage(c,0,0);const u=a.getImageData(0,0,c.width,c.height).data,l=new Image;l.onload=()=>{i||c.width===l.width&&c.height===l.height||(o&&r(c,l),c.width!==l.width?s(new Error("Invalid width: "+l.width+", should be "+c.width)):s(new Error("Invalid height: "+l.height+", should be "+c.height)));const e=document.createElement("canvas");e.width=c.width,e.height=c.height,e.style.imageRendering="pixelated";const t=e.getContext("2d");t.drawImage(l,0,0,c.width,c.height);const a=t.getImageData(0,0,c.width,c.height).data;let d=0;const h=c.width,f=c.height;for(let e=0;e<h;e++)for(let t=0;t<f;t++)d+=Math.abs(u[t*h*4+4*e+0]-a[t*h*4+4*e+0]),d+=Math.abs(u[t*h*4+4*e+1]-a[t*h*4+4*e+1]),d+=Math.abs(u[t*h*4+4*e+2]-a[t*h*4+4*e+2]);const p=Math.floor(d/(c.width*c.height*3));o&&p>n&&r(c,i?e:l),s(p>n?new Error("Image not same, wrong: "+p):null)},l.src=t},c.src=e}))));function s(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t.toDataURL("image/png")}function r(e,t){document.body.appendChild(document.createElement("hr")),document.body.appendChild(e);const n=document.createElement("div");n.innerHTML="^=expected, v=actual",document.body.appendChild(n),document.body.appendChild(t)}n.renderComparsionOf=function(e,t){const n=s(e),o=s(t),i=new Image,a=new Image;i.onload=()=>{a.onload=()=>{r(i,a)},a.src=o},i.src=n}},{}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.destroy=n.makeLibZip=void 0;const o=e("chai"),s=e("../../src/impl/modules"),r=e("../../src/libzip/libzip");n.makeLibZip=async function(e){e=e||{};const t=await new s.WasmModulesImpl("/","","").libzip();return await t.instantiate(e),new r.default(e,"/home/web_user")},n.destroy=function(e){const t=e.destroy();o.assert.equal(t.name,"ExitStatus"),o.assert.equal(t.status,0)}},{"../../src/impl/modules":53,"../../src/libzip/libzip":55,chai:5}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.testDosBundle=void 0;const o=e("chai"),s=e("../../src/dos/bundle/dos-bundle"),r=e("./libzip"),i=e("../../src/impl/emulators-impl"),a=e("../../src/build");async function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=await e.toUint8Array(n),s=await(0,r.makeLibZip)();await s.zipToFs(o),await t(s),(0,r.destroy)(s)}n.testDosBundle=function(){suite("bundle"),test("bundle should contain default dosbox.conf",(async()=>{await c(await i.default.bundle(),(async e=>{const t=await e.readFile(".jsdos/dosbox.conf"),n=JSON.parse(await e.readFile(".jsdos/jsdos.json"));o.assert.ok(t),o.assert.ok(n),o.assert.equal(s.defaultConfig,t),o.assert.equal(JSON.stringify({version:a.Build.version}),JSON.stringify(n))}))})),test("bundle should download and extract archive to root",(async()=>{const e=(await i.default.bundle()).extract("digger.zip","/");await c(e,(async e=>{const t=await e.readFile(".jsdos/dosbox.conf"),n=await e.readFile("/DIGGER.COM","binary");o.assert.ok(t),o.assert.ok(n)}))})),test("bundle conf can be overwritten",(async()=>{const e=await await i.default.bundle(),t="overwritten by test";e.dosboxConf+="\n#"+t,e.extract("helloworld.jsdos","/"),await c(e,(async e=>{const n=await e.readFile(".jsdos/dosbox.conf","utf8");o.assert.ok(-1===n.indexOf(t),"dosbox.conf should not contains test phrase")})),await c(e,(async e=>{const n=await e.readFile(".jsdos/dosbox.conf","utf8");o.assert.ok(n.indexOf(t)>0,"dosbox.conf should contains test phrase")}),!0)})),test("bundle should download and extract archive to path",(async()=>{const e=(await i.default.bundle()).extract("digger.zip","test");await c(e,(async e=>{const t=await e.readFile(".jsdos/dosbox.conf"),n=await e.readFile("/test/DIGGER.COM","binary");o.assert.ok(t),o.assert.ok(n)}))})),test("bundle should extract multiple archive to paths",(async()=>{const e=(await i.default.bundle()).extract("digger.zip","/test").extract("arkanoid.zip","/arkanoid");await c(e,(async e=>{const t=await e.readFile(".jsdos/dosbox.conf"),n=await e.readFile("/test/DIGGER.COM","binary"),s=await e.readFile("/arkanoid/Arkanoid/ARKANOID.COM","binary");o.assert.ok(t),o.assert.ok(n),o.assert.ok(s)}))})),test("can read bundle config",(async()=>{const e=await(0,r.makeLibZip)();e.writeFile("1","1");let t=await e.zipFromFs();e.destroy(),o.assert.equal(await i.default.bundleConfig(t),null);const n=await i.default.bundle();t=await n.toUint8Array(),o.assert.equal((await i.default.bundleConfig(t)).dosboxConf,n.dosboxConf),o.assert.equal(JSON.stringify((await i.default.bundleConfig(t)).jsdosConf),JSON.stringify(n.jsdosConf))})),test("can update bundle config",(async()=>{const e=await i.default.bundle(),t=await i.default.bundleUpdateConfig(await e.toUint8Array(),{dosboxConf:"[sdl]",jsdosConf:{version:"0"}}),n=await i.default.bundleConfig(t);o.assert.equal("[sdl]",n.dosboxConf),o.assert.equal(JSON.stringify({version:"0"}),JSON.stringify(n.jsdosConf))}))}},{"../../src/build":45,"../../src/dos/bundle/dos-bundle":46,"../../src/impl/emulators-impl":52,"./libzip":59,chai:5}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.testDos=void 0;const o=e("chai"),s=e("./compare"),r=e("../../src/impl/emulators-impl"),i=e("../../src/http"),a=e("../../src/keys"),c=e("./libzip"),u=e("../../src/build"),l=e("../../src/impl/emulators-impl");function d(e,t,n){async function d(t,n){return t=await Promise.resolve(t),await e(await t.toUint8Array(),n)}suite(t+".common"),beforeEach((()=>{Mocha.process.removeListener("uncaughtException")})),test(t+" can read dosbox.conf from string",(async()=>{const t="[sdl]\ntest_prop=1",n=(new TextDecoder).decode(await(await e(t)).fsReadFile(".jsdos/dosbox.conf"));o.assert.equal(n,t)})),test(t+" can read dosbox.conf from DosConfig",(async()=>{const t="[sdl]\ntest_prop=1",n={version:"test"},s=await await e({dosboxConf:t,jsdosConf:n}),r=new TextDecoder;o.assert.equal(r.decode(await s.fsReadFile(".jsdos/dosbox.conf")),t),o.assert.equal(r.decode(await s.fsReadFile(".jsdos/jsdos.json")),JSON.stringify(n,null,2))})),test(t+" can track extract progress",(async()=>{const e=[],t=await d(r.default.bundle(),{onExtractProgress:(t,n,o,s)=>{e.push(t+" "+n+" "+o+" "+s)}});o.assert.ok(t),o.assert.deepEqual(e,["0 .jsdos/ 1 4","0 .jsdos/dosbox.conf 2 4","0 .jsdos/readme.txt 3 4","0 .jsdos/jsdos.json 4 4"])})),test(t+" can take screenshot of dosbox",(async()=>{const e=await d(r.default.bundle());o.assert.ok(e),await(0,s.waitImage)(n+"/init.png",e,{threshold:0})})),test(t+" should not start without jsdos conf",(async()=>{try{const t=await(0,i.httpRequest)("digger.zip",{responseType:"arraybuffer"});await e(new Uint8Array(t)),o.assert.fail()}catch(e){o.assert.equal('["Broken bundle, .jsdos/dosbox.conf not found"]',e.message)}})),test(t+" should provide config back to js",(async()=>{const e=await r.default.bundle(),t=await d(e);o.assert.ok(t);const n=await t.config();o.assert.equal(n.dosboxConf,e.dosboxConf),o.assert.equal(JSON.stringify(n.jsdosConf),JSON.stringify(e.jsdosConf)),await t.exit()})),suite(t+".persistency");let h=new Uint8Array;test(t+" should not return empty updates",(async()=>{const e=await l.default.bundle(),t=await d(e);o.assert.ok(t);const n=await t.persist();o.assert.ok(null===n,"changes not empty!")})),test(t+" should store fs updates between sessions [empty db]",(async()=>{const t=await(0,i.httpRequest)("helloworld.jsdos",{responseType:"arraybuffer"}),r=await e(new Uint8Array(t));o.assert.ok(r),o.assert.ok(h,"cachedBundle is undefined"),await(0,s.waitImage)(n+"/persistent-mount.png",r,{success:async()=>{h=await r.persist();const e=await(0,c.makeLibZip)();e.zipToFs(h),o.assert.ok(e.exists("HW.TXT"),"hw.txt not exists");const t=await e.readFile("HW.TXT");e.destroy(),o.assert.equal(t,"HELLO, WROLD!\r\n")}})})),test(t+" should store fs updates between sessions [existent db]",(async()=>{const t=await(0,i.httpRequest)("helloworld.jsdos",{responseType:"arraybuffer"}),r=await e([new Uint8Array(t),h]);o.assert.ok(r),h=new Uint8Array,await(0,s.waitImage)(n+"/persistent-mount-second.png",r,{success:async()=>{const e=await(0,c.makeLibZip)();e.zipToFs(await r.persist()),o.assert.ok(e.exists("HW.TXT"),"hw.txt not exists");const t=await e.readFile("HW.TXT");e.destroy(),o.assert.equal(t,"HELLO, WROLD!\r\nHELLO, WROLD!\r\n")}})})),suite(t+".fs"),test(t+" can browse fs tree",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip"));o.assert.ok(e);const t=await e.fsTree(),n=JSON.stringify({name:".",nodes:[{name:".jsdos",nodes:[{name:"dosbox.conf",nodes:null,size:7825},{name:"readme.txt",nodes:null,size:306},{name:"jsdos.json",nodes:null,size:JSON.stringify({version:u.Build.version},null,2).length}],size:null},{name:"DIGGER.COM",nodes:null,size:57856}],size:null},null,2),s=JSON.stringify(t,null,2);o.assert.equal(s,n),await e.exit()})),test(t+" can read the file from fs",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip"));o.assert.ok(e);const t=await e.fsReadFile(".jsdos/jsdos.json");o.assert.ok(t),o.assert.equal((new TextDecoder).decode(t),JSON.stringify({version:u.Build.version},null,2)),await e.exit()})),test(t+" can write file and then read it from fs",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip"));o.assert.ok(e);const t="The js-dos v8 is absoultely badass";await e.fsWriteFile("dynamic/jsdos.v8",(new TextEncoder).encode(t));const n=await e.fsReadFile("dynamic/jsdos.v8");o.assert.equal((new TextDecoder).decode(n),t),await e.exit()})),suite(t+".game"),test(t+" can run digger.jsdos",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e),await(0,s.waitImage)("digger.png",e,{timeout:5e3,resize:"dosbox-x"===n})})),test(t+" can play sound",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e),o.assert.equal(e.soundFrequency(),44100,"sound frequency should be 22050");const t=await new Promise((t=>{e.events().onSoundPush((e=>{t(e)}))}));o.assert.ok(t.byteLength>0,"samples is empty"),await e.exit()})),test(t+" exit event",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e);const t=new Promise((t=>{e.events().onExit((()=>{t()}))}));await e.exit(),await t,o.assert.ok(!0)})),test(t+" can pause/resume emulation",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e),await new Promise((e=>setTimeout(e,1e3))),e.pause(),await new Promise((e=>setTimeout(e,300)));const t=await e.screenshot();await new Promise((e=>setTimeout(e,300)));const n=await e.screenshot();e.resume(),await new Promise((e=>setTimeout(e,300)));const i=await e.screenshot();function a(e,t){for(let n=0;n<e.data.length;++n)if(e.data[n]!==t.data[n])return!1;return!0}await e.exit(),a(t,n)||((0,s.renderComparsionOf)(t,n),o.assert.fail("screenshot during pause is changed")),a(t,i)&&(console.log(t===i,t,i),(0,s.renderComparsionOf)(t,i),o.assert.fail("screenshot during emulation is not changed"))})),test(t+" can simulate key events",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e),await new Promise(((t,o)=>{setTimeout((()=>{e.simulateKeyPress(a.Keys.KBD_left)}),2e3),setTimeout((()=>{(0,s.waitImage)("digger-end.png",e,{threshold:2,resize:"dosbox-x"===n,timeout:5e3}).then(t).catch(o)}),3e3)}))})),test(t+" can simulate key combination",(async()=>{const e=await d((await r.default.bundle()).extract("digger.zip").autoexec("DIGGER.COM"));o.assert.ok(e);const t=[];let n=0;e.addKey=(e,o,s)=>{0===n&&(n=s),t.push([e,o,s])},await new Promise(((s,r)=>{setTimeout((()=>{e.simulateKeyPress(a.Keys.KBD_left,a.Keys.KBD_leftctrl,a.Keys.KBD_leftshift)}),2e3),setTimeout((()=>{o.assert.deepEqual(t,[[a.Keys.KBD_left,!0,n],[a.Keys.KBD_leftctrl,!0,n],[a.Keys.KBD_leftshift,!0,n],[a.Keys.KBD_left,!1,n+16],[a.Keys.KBD_leftctrl,!1,n+16],[a.Keys.KBD_leftshift,!1,n+16]]),s()}),2100)})),await e.exit()})),test(t+" can simulate mouse events",(async()=>{const t=await(0,i.httpRequest)("mousetst.jsdos",{responseType:"arraybuffer"}),r=await e(new Uint8Array(t));o.assert.ok(r),await new Promise(((e,t)=>{setTimeout((()=>{r.sendMouseMotion(.59375,.625),r.sendMouseButton(0,!0),(0,s.waitImage)(n+"/mousetst.png",r,{threshold:2}).then(e).catch(t)}),"dosbox"===n?1e3:3e3)}))}))}n.testDos=function(){d(((e,t)=>r.default.dosboxDirect(e,t)),"dosboxDirect","dosbox"),d(((e,t)=>r.default.dosboxWorker(e,t)),"dosboxWorker","dosbox"),d(((e,t)=>r.default.dosboxXDirect(e,t)),"dosboxXDirect","dosbox-x"),d(((e,t)=>r.default.dosboxXWorker(e,t)),"dosboxXWorker","dosbox-x")}},{"../../src/build":45,"../../src/http":50,"../../src/impl/emulators-impl":52,"../../src/keys":54,"./compare":58,"./libzip":59,chai:5}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.testLibZip=void 0;const o=e("chai"),s=e("./libzip");n.testLibZip=function(){suite("libzip"),test("libzip should start/stop",(async()=>{const e=await(0,s.makeLibZip)();o.assert.ok(e),(0,s.destroy)(e)})),test("libzip can write/read file",(async()=>{const e=await(0,s.makeLibZip)();o.assert.ok(e),await e.writeFile("ElonMusk",r);const t=await e.readFile("ElonMusk");o.assert.equal(t,r),(0,s.destroy)(e)}));let e=new Uint8Array;test("libzip create archive from fs",(async()=>{const t=await(0,s.makeLibZip)();t.writeFile("file1","file1-contents"),t.writeFile("dir1/file1","dir1-file1-contents"),t.writeFile("dir1/file2","dir1-file2-contents"),t.writeFile("dir1/dir2/file1","dir1-dir2-file1-contents"),e=await t.zipFromFs(),o.assert.ok(e),o.assert.ok(e.length>0),(0,s.destroy)(t)})),test("libzip extract archive to fs",(async()=>{const t=await(0,s.makeLibZip)();o.assert.ok(!t.exists("file1")),o.assert.ok(!t.exists("dir1/file1")),o.assert.ok(!t.exists("dir1/file2")),o.assert.ok(!t.exists("dir1/dir2/file1")),await t.zipToFs(e),o.assert.equal(await t.readFile("file1"),"file1-contents"),o.assert.equal(await t.readFile("dir1/file1"),"dir1-file1-contents"),o.assert.equal(await t.readFile("dir1/file2"),"dir1-file2-contents"),o.assert.equal(await t.readFile("dir1/dir2/file1"),"dir1-dir2-file1-contents"),(0,s.destroy)(t)})),test("libzip can track extract progress",(async()=>{const t=[],n=await(0,s.makeLibZip)({libzip_progress:(e,n,o)=>{t.push(e+" "+n+" "+o)}});o.assert.ok(!n.exists("file1")),o.assert.ok(!n.exists("dir1/file1")),o.assert.ok(!n.exists("dir1/file2")),o.assert.ok(!n.exists("dir1/dir2/file1")),await n.zipToFs(e),o.assert.deepEqual(t,["file1 1 6","dir1/ 2 6","dir1/file1 3 6","dir1/file2 4 6","dir1/dir2/ 5 6","dir1/dir2/file1 6 6"]),(0,s.destroy)(n)})),test("libzip extract archive to fs [in folder]",(async()=>{const t=await(0,s.makeLibZip)();o.assert.ok(!t.exists("file1")),o.assert.ok(!t.exists("dir1/file1")),o.assert.ok(!t.exists("dir1/file2")),o.assert.ok(!t.exists("dir1/dir2/file1")),await t.zipToFs(e,"/test/"),o.assert.equal(await t.readFile("/test/file1"),"file1-contents"),o.assert.equal(await t.readFile("/test/dir1/file1"),"dir1-file1-contents"),o.assert.equal(await t.readFile("/test/dir1/file2"),"dir1-file2-contents"),o.assert.equal(await t.readFile("/test/dir1/dir2/file1"),"dir1-dir2-file1-contents"),(0,s.destroy)(t)})),test("libzip can create archive with changed files",(async()=>{let t=await(0,s.makeLibZip)();await t.zipToFs(e);const n=Date.now();await new Promise((e=>setTimeout(e,4))),t.writeFile("file2","file2-contents-new"),t.writeFile("dir1/file1","dir1-file1-contents-changed"),t.writeFile("dir1/file3","dir1-file3-contents-new");const r=await t.zipFromFs(n);(0,s.destroy)(t),t=await(0,s.makeLibZip)(),await t.zipToFs(r),o.assert.ok(!t.exists("file1")),o.assert.ok(!t.exists("dir1/file2")),o.assert.ok(!t.exists("dir1/dir2/file1")),o.assert.equal(await t.readFile("file2"),"file2-contents-new"),o.assert.equal(await t.readFile("dir1/file1"),"dir1-file1-contents-changed"),o.assert.equal(await t.readFile("dir1/file3"),"dir1-file3-contents-new"),(0,s.destroy)(t)})),test("libzip writeFile error handling",(async()=>{const e=await(0,s.makeLibZip)();try{await e.writeFile("",""),o.assert.fail("shouldn't be valid")}catch(e){o.assert.equal("Can't create file '', because file name is empty",e.message)}try{await e.writeFile("/home/",""),o.assert.fail("shouldn't be valid")}catch(e){o.assert.equal("Can't create file 'home/', because file name is empty",e.message)}(0,s.destroy)(e)})),test("libzip can writeFile starting from '/'",(async()=>{const e=await(0,s.makeLibZip)();await e.writeFile("/wiki/musk",r),o.assert.ok(e.exists("wiki/musk")),o.assert.ok(e.exists("/wiki/musk")),o.assert.equal(await e.readFile("wiki/musk"),r),o.assert.equal(await e.readFile("/wiki/musk"),r),(0,s.destroy)(e)})),test("libzip can writeFile starting from '/' (windows style)",(async()=>{const e=await(0,s.makeLibZip)();await e.writeFile("C:\\wiki\\musk",r),o.assert.ok(e.exists("wiki/musk")),o.assert.ok(e.exists("/wiki/musk")),o.assert.ok(e.exists("C:\\wiki\\musk")),o.assert.ok(e.exists("D:\\wiki\\musk")),o.assert.equal(await e.readFile("wiki/musk"),r),o.assert.equal(await e.readFile("/wiki/musk"),r),o.assert.equal(await e.readFile("C:\\wiki\\musk"),r),o.assert.equal(await e.readFile("C:\\wiki\\musk"),r),(0,s.destroy)(e)})),test("libzip filter must work",(async()=>{let e=await(0,s.makeLibZip)();await e.writeFile("wiki/musk1",r),await e.writeFile("wiki/musk2",r),await e.writeFile("wiki/musk3",r),await e.writeFile("wiki/musk4",r);const t=await e.zipFromFs();(0,s.destroy)(e),e=await(0,s.makeLibZip)(),await e.zipToFs(t,"/","wiki/musk2"),o.assert.equal(await e.readFile("wiki/musk1").catch((()=>"")),""),o.assert.equal(await e.readFile("wiki/musk2"),r),o.assert.equal(await e.readFile("wiki/musk3").catch((()=>"")),""),o.assert.equal(await e.readFile("wiki/musk4").catch((()=>"")),""),await e.zipToFs(t,"/","wiki/musk3"),o.assert.equal(await e.readFile("wiki/musk1").catch((()=>"")),""),o.assert.equal(await e.readFile("wiki/musk2"),r),o.assert.equal(await e.readFile("wiki/musk3"),r),o.assert.equal(await e.readFile("wiki/musk4").catch((()=>"")),""),(0,s.destroy)(e)})),test("libzip can add file to archive",(async()=>{let e=await(0,s.makeLibZip)();await e.writeFile("wiki/musk1","to be replaced");const t=await e.zipFromFs();(0,s.destroy)(e),e=await(0,s.makeLibZip)(),await e.writeFile("archive.zip",t),await e.writeFile("wiki/musk1",r),await e.zipAddFile("archive.zip","wiki/musk1");const n=await e.readFile("archive.zip","binary");(0,s.destroy)(e),e=await(0,s.makeLibZip)(),await e.zipToFs(n,"/"),o.assert.equal(r,await e.readFile("wiki/musk1")),(0,s.destroy)(e)}))};const r="\nElon Reeve Musk FRS (/iln/; born June 28, 1971) is a\ntechnology entrepreneur and engineer.[10][11][12]\nHe holds South African, Canadian, and U.S. citizenship\nand is the founder, CEO, and lead designer of SpaceX;\n[13] co-founder, CEO, and product architect of Tesla, Inc.;\n[14] co-founder and CEO of Neuralink; and co-founder of PayPal.\nIn December 2016, he was ranked 21st on the Forbes list of\nThe World's Most Powerful People.[15] As of October 2018,\nhe has a net worth of $22.8 billion and is listed by Forbes\nas the 54th-richest person in the world.[16]\nBorn and raised in Pretoria, South Africa, Musk moved to\nCanada when he was 17 to attend Queen's University.\nHe transferred to the University of Pennsylvania two years\nlater, where he received an economics degree from\nthe Wharton School and a degree in physics from the College\nof Arts and Sciences. He began a Ph.D.\nin applied physics and material sciences at Stanford University\nin 1995 but dropped out after two days to pursue\nan entrepreneurial career. He subsequently co-founded Zip2, a\nweb software company, which was acquired by Compaq\nfor $340 million in 1999. Musk then founded X.com, an online bank.\nIt merged with Confinity in 2000 and later that\nyear became PayPal, which was bought by eBay for $1.5 billion\nin October 2002.[17][18][19][20]\n"},{"./libzip":59,chai:5}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.testLoader=void 0;const o=e("chai"),s=e("../../src/impl/modules");n.testLoader=function(){suite("WASM loader"),test("loader should rejects when wasm not supported",(async()=>{s.host.wasmSupported=!1;try{await(0,s.loadWasmModule)("wrongurl.js","",(()=>{})),s.host.wasmSupported=!0,o.assert.fail()}catch(e){s.host.wasmSupported=!0,o.assert.equal("Starting from js-dos 6.22.60 js environment is not supported",e.message)}})),test("loader should rejects when js file not exists",(async()=>{try{await(0,s.loadWasmModule)("wrongurl.js","",(()=>{})),o.assert.fail()}catch(e){o.assert.equal("Unable to download 'wrongurl.wasm', code: 404",e.message)}})),test("loader should show progress loading",(async()=>{await(0,s.loadWasmModule)("/wdosbox.js","",((e,t,n)=>{o.assert.equal(!0,n<=t,"onprgoress: "+n+"<="+t)}))}))}},{"../../src/impl/modules":53,chai:5}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.testNet=void 0;const o=e("chai"),s=e("../../src/emulators"),r=e("../../src/impl/emulators-impl"),i="test_"+Math.round(1e5*Math.random()),a="http:"===window.location.protocol?"ws://":"wss://";function c(e,t,n){const c=1900,l=window.ipxServerAddress,d=("string"==typeof l?l:"127.0.0.1")+":"+c+"/ipx/"+i,h=d.startsWith("wss://")||d.startsWith("ws://")?d+" "+c:a+d+" "+c;async function f(t){return t=await Promise.resolve(t),await e(await t.toUint8Array())}suite(t+".ipx"),test(t+" should not freeze when connecting to wrong address (jsapi)",(async()=>{let e=!1;const t=[],n=await f(await r.default.bundle());o.assert.ok(n),n.events().onMessage(((e,n)=>{t.push(n)})),n.events().onNetworkDisconnected((()=>{e=!0}));try{await n.networkConnect(s.NetworkType.NETWORK_DOSBOX_IPX,"127.0.0.1:1902/ipx/"+i),o.assert.ok(!1,JSON.stringify(t,null,2))}catch(t){o.assert.ok(e,"Disconnected is not notified")}finally{await n.exit()}})),test(t+" should connect to port "+h+" (jsapi)",(async()=>{let e=!1,t=!1,n=!1;const i=[],a=await f(await r.default.bundle());o.assert.ok(a),a.events().onMessage(((e,t)=>{i.push(t),n=n||t.startsWith("[LOG_NET]IPX: Connected to server.  IPX address is")})),a.events().onNetworkConnected((()=>{e=!0})),a.events().onNetworkDisconnected((()=>{t=!0})),await a.networkConnect(s.NetworkType.NETWORK_DOSBOX_IPX,d),await a.networkDisconnect(s.NetworkType.NETWORK_DOSBOX_IPX),await a.exit(),o.assert.ok(n,JSON.stringify(i,null,2)),o.assert.ok(e,"Connected is not notified"),o.assert.ok(t,"Disconnected is not notified")})),test(t+" should connect to "+h+" (ipxnet)",(async()=>{let e=!1,t=!1,i=!1;const a=[],c=await f((await r.default.bundle()).autoexec("ipxnet connect "+h));o.assert.ok(c),c.events().onMessage(((e,t)=>{a.push(t),i=i||t.startsWith("[LOG_NET]IPX: Connected to server.  IPX address is")})),c.events().onNetworkConnected((()=>{e=!0})),c.events().onNetworkDisconnected((()=>{t=!0})),await u("dosbox-x"===n?3e3:300),await c.networkDisconnect(s.NetworkType.NETWORK_DOSBOX_IPX),await c.exit(),o.assert.ok(i,JSON.stringify(a,null,2)),o.assert.ok(e,"Connected is not notified"),o.assert.ok(t,"Disconnected is not notified")})),test(t+" 2 clients can ping each other (ipxnet)",(async()=>{let e=0,t=0;const s={},i=new RegExp(/\[LOG_NET\]\d+:.*port\s+(\d+)\s+time=(\d+)ms/),a=[],c=await f((await r.default.bundle()).autoexec("ipxnet connect "+h));o.assert.ok(c),await u("dosbox-x"===n?3e3:300);const l=await f((await r.default.bundle()).autoexec("ipxnet connect "+h+"\nipxnet ping"));o.assert.ok(l),l.events().onMessage(((n,o)=>{a.push(o);const r=i.exec(o);r&&(console.log(o),s[r[1]]=!0,e+=Number.parseInt(r[2]),t++)})),await u("dosbox-x"===n?3e3:1500),await c.exit(),await l.exit();const d=Object.keys(s);(0,o.assert)(1===d.length,"Should be 1 used port, but have "+JSON.stringify(d)+":\n"+JSON.stringify(a,null,2)),console.log("PING avg",h,"is",Math.round(e/t),"ms")}))}async function u(e){return new Promise((t=>{setTimeout(t,e)}))}n.testNet=function(){c((e=>r.default.dosboxDirect(e)),"dosboxDirect","dosbox"),c((e=>r.default.dosboxWorker(e)),"dosboxWorker","dosbox"),c((e=>r.default.dosboxXDirect(e)),"dosboxXDirect","dosbox-x"),c((e=>r.default.dosboxXWorker(e)),"dosboxXWorker","dosbox-x")}},{"../../src/emulators":49,"../../src/impl/emulators-impl":52,chai:5}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createNetworkTests=n.createTests=void 0;const o=e("./test-loader"),s=e("./test-libzip"),r=e("./test-bundle"),i=e("./test-dos"),a=e("./test-net");function c(){(0,o.testLoader)(),(0,s.testLibZip)(),(0,r.testDosBundle)(),(0,i.testDos)()}function u(){(0,a.testNet)()}e("../../src/impl/emulators-impl").default.pathPrefix="/",n.createTests=c,n.createNetworkTests=u,window.createTests=c,window.createNetworkTests=u},{"../../src/impl/emulators-impl":52,"./test-bundle":60,"./test-dos":61,"./test-libzip":62,"./test-loader":63,"./test-net":64}]},{},[65]);